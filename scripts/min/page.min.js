var nret=nret||{};!function(e){nret.realEstatePage={stickySubNav_RealEstate:function(){var t=e(".real-estate-community-nav").length>0,i=null,n=null,o=null,a=function(t){e(".real-estate-header").toggleClass("stuck"),"up"==t?e(".real-estate-community-nav").removeAttr("style"):"down"==t&&(e(".real-estate-community-nav").velocity({top:45},350),e(".real-estate-community-nav").velocity({opacity:1},250))};t&&(i=e(".real-estate-community-nav")[0],n=30,o=function(e){a(e)});new Waypoint.Sticky({element:i,handler:function(e){o(e)},offset:n})},realEstatePageListeners:function(){e(".real-estate-mobile-navigation-open").on("click",function(){e(this).toggleClass("open")}),e(".has-subnavigation > button").on("click",function(){e(this).closest(".has-subnavigation").siblings().removeClass("open"),e(this).closest(".has-subnavigation").toggleClass("open")}),e(".real-estate-submenu-item > button").on("click",function(){e(this).closest(".real-estate-submenu-item").siblings().removeClass("open active"),e(this).closest(".real-estate-submenu-item").toggleClass("open").addClass("active")}),e(".real-estate-footer-menu-item h4 button").on("click",function(){e(this).closest(".real-estate-footer-menu-item").siblings().removeClass("open"),e(this).closest(".real-estate-footer-menu-item").toggleClass("open")}),e(".launch-contact-modal").on("click",function(){e(".real-estate-contact-form-modal").fadeIn()}),e(".close-contact-modal").on("click",function(){e(".real-estate-contact-form-modal").fadeOut()})},init:function(){nret.realEstatePage.realEstatePageListeners(),e(".real-estate-community-nav").length>0&&(e("body").hasClass("node-type-retreat")||e("body").hasClass("desktop")||window.innerWidth>=900)&&nret.realEstatePage.stickySubNav_RealEstate()}},jQuery(document).ready(function(){nret.realEstatePage.init()})}(jQuery);var nret=nret||{};!function(e){nret.about={embedInstagramPics:function(){new Instafeed({get:"user",userId:"1101490324",clientId:"c8d28a45dd02413e975170c69d007168",sortBy:"most-recent",resolution:"standard_resolution",template:'<div class="instagram-block" style="background:url({{image}}) no-repeat center center;background-size:contain;background-position:top;"><div class="instagram-block__cta"><span class="icon icon_instagram"></span></div></div>',limit:2}).run()},controlPlaybackOnAbout:function(){var t=document.getElementById("aboutBgVid");e("#launchMobileAboutVideo").on("click",function(){t.webkitEnterFullscreen(),t.play()})},init:function(){nret.about.embedInstagramPics(),nret.about.controlPlaybackOnAbout()}}}(jQuery);var nret=nret||{};!function(e){nret.page_booking={showPageContents:function(){e(".booking-page").find("> .wrapper").addClass("show")},init:function(){nret.page_booking.showPageContents()}},jQuery(document).ready(function(){e(".booking-page").length>0&&nret.page_booking.init()})}(jQuery);var nret=nret||{};!function(e,t){var i="dd-M-yy",n="M dd",o=window.innerWidth<769?1:2,a=e("#destination-check-in"),r=e(".checkin-sublabel"),s=e("#destination-check-out"),c=e(".check-in-overlay"),l=e(".checkout-sublabel"),d=e(".check-out-overlay"),u=e("#booking-error"),h=(e("#bookingWidgetForm"),e('#bookingWidgetForm button[type="submit"]')),p=function(){function i(){o(),r()}function o(){k.checkInDatepicker.clear(),t.remove("nret[start_date]")}function r(){k.checkOutDatepicker.clear(),k.departureDates=[],t.remove("nret[end_date]")}function l(){u.hide().text(""),h.removeClass("booking-error")}function p(){e("#calendar-error").remove()}function v(e){u.show().text(e),h.addClass("booking-error")}function g(t){var i=['<div id="calendar-error">',"<p>"+t+"</p>",'<button class="launch-enquiry">Ask about these dates <span class="side-arrow"></span></button>',"</div>"].join("");e("#calendar-legend").before(i),e(".launch-enquiry").click(function(){e(".retreat-detail__enquiry-window").addClass("show"),e(".retreat-detail__enquiry-window").scrollLock()})}var k=this;k.arrivalDates=[],k.departureDates=[],k.checkInDatepicker=void 0,k.checkOutDatepicker=void 0,k.clear=i,k.clearCheckInDatepicker=o,k.clearCheckOutDatepicker=r,k.hideFilterError=l,k.hideCalendarError=p,k.showFilterError=v,k.showCalendarError=g,function(){k.checkInDatepicker=new f(k),k.checkOutDatepicker=new m(k);var i=t.get("nret[start_date]"),o=t.get("nret[end_date]");if(i&&o){var r=i.toLowerCase().split("-"),l=o.toLowerCase().split("-"),u=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],h=u.indexOf(r[1]),p=u.indexOf(l[1]),v=new Date(r[2],h,r[0]),g=new Date(l[2],p,l[0]);a.datepicker("setDate",v);var _=e.datepicker.formatDate(n,v).toUpperCase();c.text(_),s.is(":disabled")&&s.prop("disabled",!1);var C=a.datepicker("getDate");s.datepicker("option","defaultDate",C),s.datepicker("setDate",g);var b=e.datepicker.formatDate(n,g).toUpperCase();d.text(b)}}()},f=function(l){function d(){clearTimeout(k),e("#ui-datepicker-div .ui-datepicker-calendar").is(":visible")?(e(".ui-datepicker-prev:not(.ui-state-disabled), .ui-datepicker-next:not(.ui-state-disabled)").click(function(){u()}),e(".clear-dates button, button.clear-dates").on("click",function(){l.clear()}),e(".ui-state-default").on("click",function(){e(".ui-state-default").parent().removeClass("calendar-error");var t=e(this),i=t.parent().data("year"),n=t.parent().data("month"),o=t.text(),a=new Date;a.setFullYear(i,n,o),p(a)||(event.preventDefault(),event.stopPropagation(),e(this).parent().addClass("calendar-error"))})):k=setTimeout(d,10)}function u(){if(window.innerWidth<769&&!e.contains(".filter-option-check-in","#ui-datepicker-div")){e("#ui-datepicker-div").detach().appendTo(".filter-option-check-in")}d()}function h(e){if(e<=new Date)return[!1,"",null];var t=a.datepicker("getDate"),i=s.datepicker("getDate"),n="";return t&&e.getTime()===t.getTime()&&(n+=" check-in-date"),i&&e.getTime()===i.getTime()&&(n+=" check-out-date"),t&&i&&e<i&&e>t&&(n+=" in-between"),[!0,n.trim(),null]}function p(e){l.hideCalendarError();var t,i=new Date;return e<=i?(l.showCalendarError("Sorry, the date you have selected is not available."),t=!1):t=!0,t}function f(){var o=a.datepicker("getDate"),d=s.datepicker("getDate"),u=e.datepicker.formatDate(i,o).toUpperCase(),h=e.datepicker.formatDate(n,o).toUpperCase();c.text(h),t.set("nret[start_date]",u),e(".filter__cal-wrapper-out").length>0&&(e(".filter__cal-wrapper-in").removeClass("show"),e(".filter__cal-wrapper-out").addClass("show")),s.is(":disabled")&&s.prop("disabled",!1),s.datepicker("option","defaultDate",o),d||setTimeout(function(){s.datepicker("show")},250),r.addClass("show"),l.clearCheckOutDatepicker()}function m(){a.datepicker("setDate",null).datepicker("hide").blur(),c.text("Select Date"),s.prop("disabled",!0).blur()}function v(){a.datepicker("refresh"),u()}var g=this;g.clear=m,g.refresh=v,function(){a.datepicker({dateFormat:a.data("dateFormat"),minDate:0,numberOfMonths:o,beforeShow:u,beforeShowDay:h,onSelect:f})}();var k},m=function(r){function c(){clearTimeout(k),e("#ui-datepicker-div .ui-datepicker-calendar").is(":visible")?(e(".ui-datepicker-prev:not(.ui-state-disabled), .ui-datepicker-next:not(.ui-state-disabled)").click(function(){u()}),e(".clear-dates button, button.clear-dates").on("click",function(){r.clear()}),e(".ui-state-default").on("click",function(){e(".ui-state-default").parent().removeClass("calendar-error");var t=e(this),i=t.parent().data("year"),n=t.parent().data("month"),o=t.text(),a=new Date;a.setFullYear(i,n,o),p(a,this)||(event.preventDefault(),event.stopPropagation(),e(this).parent().addClass("calendar-error"))}),window.innerWidth>=769&&e("#ui-datepicker-div tbody td").on("mouseenter",function(){if(!e(this).hasClass("ui-datepicker-other-month")){var t=a.datepicker("getDate"),i=s.datepicker("getDate");if(t&&!i){var n=e("#ui-datepicker-div tbody td").index(this),o=e("#ui-datepicker-div tbody td.check-in-date"),r=o.length?e("#ui-datepicker-div tbody td").index(o):0;e("#ui-datepicker-div tbody td").each(function(t,i){return!!(t<r||e(i).hasClass("check-in-date"))||!(t>=n)&&void e(i).addClass("hover-in-between")})}}}).on("mouseleave",function(){e("#ui-datepicker-div tbody td").removeClass("hover-in-between")})):k=setTimeout(c,10)}function u(){if(window.innerWidth<769&&!e.contains(".filter-option-check-out","#ui-datepicker-div")){e("#ui-datepicker-div").detach().appendTo(".filter-option-check-out")}c()}function h(e){if(e<new Date)return[!1,"",null];var t=a.datepicker("getDate"),i=s.datepicker("getDate"),n="";return t&&e.getTime()===t.getTime()&&(n+=" check-in-date"),i&&e.getTime()===i.getTime()&&(n+=" check-out-date"),t&&i&&e<i&&e>t&&(n+=" in-between"),[!0,n.trim(),null]}function p(e,t){r.hideCalendarError();var i,n=new Date,o=a.datepicker("getDate");return e<=n?(r.showCalendarError("Sorry, the date you selected is not available."),i=!1):e<=o?(r.showCalendarError("Sorry, select a date after your check in date."),i=!1):i=!0,i}function f(){var o=a.datepicker("getDate"),r=s.datepicker("getDate"),c=e.datepicker.formatDate(i,r).toUpperCase(),u=e.datepicker.formatDate(n,r).toUpperCase();if(d.text(u),t.set("nret[end_date]",c),s.datepicker("option","defaultDate",o),o&&r){var h=Math.abs(r.getTime()-o.getTime()),p=Math.round(h/864e5);t.set("nret[nights]",p)}l.addClass("show")}function m(){a.blur(),s.datepicker("setDate",null).datepicker("hide").blur(),d.text("Select Date")}function v(){s.datepicker("refresh"),u()}var g=this;g.clear=m,g.refresh=v,function(){s.datepicker({dateFormat:s.data("dateFormat"),minDate:0,numberOfMonths:o,beforeShow:u,beforeShowDay:h,onSelect:f})}();var k};nret.destinationDetail={setCookiesAmenities:function(){e("input[data-more-filter-amenities]:checked").each(function(i,n){t.set("retreat_list[amenities]["+i+"]",e(n).attr("data-more-filter-amenities"))}),e("input[data-more-filter-amenities]").not(":checked").each(function(i,n){var o=e(this).attr("data-more-filter-amenities");e.each(document.cookie.split(/; */),function(){var e=this.split("=");if(e[1]==o){var i=decodeURIComponent(e[0]);t.remove(i)}})})},setCookiesArea:function(){e("input[data-more-filter-area]:checked").each(function(i,n){t.set("retreat_list[subarea]["+i+"]",e(n).attr("data-more-filter-area"))}),e("input[data-more-filter-area]").not(":checked").each(function(i,n){var o=e(this).attr("data-more-filter-area");e.each(document.cookie.split(/; */),function(){var e=this.split("=");if(e[0].indexOf("subarea")!==-1&&e[1]==o){var i=decodeURIComponent(e[0]);t.remove(i)}})})},setCookiesBathroom:function(){e('[name="filter-bathroom-choice"]').each(function(){if(e(this).is(":checked")){var i=e(this).val();t.set("retreat_list[bathrooms]",i)}})},setCookiesGuest:function(){e('[name="filter-guest-choice"]').each(function(){if(e(this).is(":checked")){var i=e(this).val();t.set("nret[guests]",i)}})},setCookiesBed:function(){e('[name="filter-bed-choice"]').each(function(){if(e(this).is(":checked")){var i=e(this).val();t.set("retreat_list[beds]",i)}})},setCookiesBedrooms:function(){e("a[data-more-filter-bedrooms]").on("click",function(){var i=e(this).attr("data-more-filter-bedrooms"),n=" Bedrooms";"1"===e(this).html()&&(n=" Bedroom"),e(".bedroom-label").html(e(this).html()+n),t.set("retreat_list[bedrooms]",i)})},refreshPage:function(){e("#destinationFilterRefresh, #destinationMoreFilterRefresh").on("click",function(){nret.destinationDetail.setCookiesGuest(),nret.destinationDetail.setCookiesBed(),nret.destinationDetail.setCookiesBathroom(),nret.destinationDetail.setCookiesArea(),nret.destinationDetail.setCookiesAmenities(),history.pushState("",document.title,window.location.pathname),window.location.href=window.location.href+"#filtered",window.location.reload()})},clearFilters:function(){e("#destinationFilterClear, .destinationFilterClear").on("click",function(){nret.destinationDetail.clearTheFilters()})},clearTheFilters:function(i){i&&i.preventDefault(),t.remove("nret[start_date]"),t.remove("nret[end_date]"),t.remove("nret[nights]"),t.remove("nret[guests]"),t.remove("retreat_list[bedrooms]"),t.remove("retreat_list[beds]"),t.remove("retreat_list[bathrooms]"),e("input[data-more-filter-amenities]").each(function(e,i){t.remove("retreat_list[amenities]["+e+"]")}),e("input[data-more-filter-area]").each(function(e,i){t.remove("retreat_list[subarea]["+e+"]")}),window.location.reload()},listen:function(){e(".filter-choice-one").on("click",function(){var t=e(this);e(this).toggleClass("filter-selected"),e(this).parents("ul").hasClass("single-choice-list")&&e(this).parents("ul").find(".filter-selected").not(t).removeClass("filter-selected")}),e("#moreFiltersWrapper .filter-choice-one").on("click",nret.destinationDetail.updateMoreFiltersCount),e("#moreFiltersWrapper input").on("change",nret.destinationDetail.updateMoreFiltersCount),e(".retreat-listing__list-bg .empty .reset").on("click",nret.destinationDetail.clearTheFilters)},updateMoreFiltersCount:function(){var t=e("#moreFiltersWrapper input:checked").length;t>0?e("#more-label").html("More Filters ("+t+")"):e("#more-label").html("More Filters")},deleteForeignCookies:function(){e.each(document.cookie.split(/; */),function(){var e=this.split("=");["destination","journal_list"].forEach(function(i){e[0].indexOf(i)!==-1&&t.remove(decodeURIComponent(e[0]))})})},readBedroomsCookie:function(){var i,n=e("#bedroom-label"),o=t.get("retreat_list[bedrooms]");o&&(i=parseInt(o),1===i?n.html("1 bedroom"):n.html(i+" bedrooms"))},readGuestsCookie:function(){var i=t.get("nret[guests]");i&&e("[data-more-filter-guest="+i+"]").prop("checked",!0)},readBedsCookie:function(){var i=t.get("retreat_list[beds]");i&&e("[data-more-filter-bed="+i+"]").prop("checked",!0)},readBathroomsCookie:function(){var i=t.get("retreat_list[bathrooms]");i&&e("[data-more-filter-bathroom="+i+"]").prop("checked",!0)},readAmenityCookies:function(){e("[data-more-filter-amenities]").each(function(i){var n=t.get("retreat_list[amenities]["+i+"]");n&&e("[data-more-filter-amenities="+n+"]").prop("checked",!0)})},readAreaCookies:function(){e("[data-more-filter-area]").each(function(i){var n=t.get("retreat_list[subarea]["+i+"]");n&&e("[data-more-filter-area="+n+"]").prop("checked",!0)})},scrollToListing:function(){"#listing"!==window.location.hash&&"#filtered"!==window.location.hash||e(window).on("load",function(){e(".retreat-listing__list").velocity("scroll",{duration:600,offset:-180,easing:"ease-in-out"})})},showMoreRetreatsEvent:function(){var t=e(".retreat-listing__block-small.retreat-listing__show-next"),i=e(".retreat-listing__block-small.retreat-listing__show-all");e("#showMoreRetreats").on("click",function(){e(this).hasClass("retreat-listing__view-more")?e(this).hasClass("retreat-listing__view-last")?(e(this).remove(),t.removeClass("retreat-listing__show-next reveal-block"),nret.helpers.revealHidden()):(e(this).removeClass("retreat-listing__view-more").addClass("retreat-listing__view-all").text("View All"),t.removeClass("retreat-listing__show-next reveal-block"),nret.helpers.revealHidden()):e(this).hasClass("retreat-listing__view-all")&&(i.removeClass("retreat-listing__show-all reveal-block"),nret.helpers.revealHidden(),e(this).remove())})},readCookies:function(){nret.destinationDetail.readGuestsCookie(),nret.destinationDetail.readBedroomsCookie(),nret.destinationDetail.readBedsCookie(),nret.destinationDetail.readBathroomsCookie(),nret.destinationDetail.readAmenityCookies(),nret.destinationDetail.readAreaCookies(),nret.destinationDetail.updateMoreFiltersCount()},checkScroll:function(){var t=e("section[data-scrolltop]"),i=e(".retreat-listing__block-small"),n=e(".filter-block__wrapper").offset().top;if(t.length){t=t.data("scrolltop"),i.length&&(n=e(i[t]).offset().top);var o=n-(e(".subnav-container").height()+e(".global-nav").height());e("body,html").animate({scrollTop:o},2200)}},addStringToReviewCount:function(){e(".bv-rating-label").length>0&&e(".bv-rating-label").each(function(){var t=e(this).text();e(this).text(t+" Reviews")})},emptyCheck:function(){e(".retreat-listing__list .wrapper .retreat-listing__block-small").length?(e(".retreat-listing__list .retreat-listing__list-bg").attr("style",""),e(".retreat-listing__list .retreat-listing__list-bg .empty").hide()):(e(".retreat-listing__list .retreat-listing__list-bg").show(),e(".retreat-listing__list .retreat-listing__list-bg .empty").show())},removeDuplicateMblMenu:function(){e("body").children("#mbl-search").remove()},showCalendarsInFilterBlock:function(){e(".filter-option-check-in").on("click",function(){e(".filter__cal-wrapper-out").removeClass("show"),e(".filter__cal-wrapper-in").addClass("show")}),e(".filter-option-check-out").on("click",function(){e(".filter__cal-wrapper-in").removeClass("show"),e(".filter__cal-wrapper-out").addClass("show")})},addNoMapClass:function(){0===e(".content-grid__offer-row").length&&e(".content-listing__map").addClass("no-map")},init:function(){e("div.lazy").lazyload({effect:"fadeIn"}),nret.destinationDetail.deleteForeignCookies(),nret.destinationDetail.readCookies(),nret.destinationDetail.listen(),nret.destinationDetail.refreshPage(),nret.destinationDetail.showCalendarsInFilterBlock(),nret.destinationDetail.clearFilters(),nret.destinationDetail.setCookiesBedrooms(),nret.destinationDetail.checkScroll(),nret.destinationDetail.showMoreRetreatsEvent(),nret.destinationDetail.removeDuplicateMblMenu(),nret.destinationDetail.addNoMapClass(),window.setTimeout(nret.destinationDetail.addStringToReviewCount,3e3),nret.destinationDetail.scrollToListing(),nret.destinationDetail.emptyCheck(),new p}}}(jQuery,Cookies);var nret=nret||{};!function(e,t){nret.destinationListing={setResultsNum:function(){var t=e(".destination-listing__block").not(".hide").length;e("#filterResultsCount").text(t)},clearListener:function(){e(".filter__clear").on("click",function(){e(".filter-selected").removeClass("filter-selected"),nret.filters.filterElements(),nret.destinationListing.setResultsNum(),nret.destinationListing.els.guestLabel.html("No. of Guests"),e(".region-list .filter-choice-init").each(function(e,i){t.remove("destination[region]["+e+"]")}),t.remove("nret[guests]"),nret.destinationListing.els.regionLabel.html("Region")})},regionListener:function(){e(".region-list .filter-choice-init").on("click",function(){var i,n=e(this),o=n.parent().parent();n.toggleClass("filter-selected"),i=o.find(".filter-selected").length,i>1?nret.destinationListing.els.regionLabel.html("Region ("+i+")"):nret.destinationListing.els.regionLabel.html("Region"),e(".region-list .filter-choice-init").each(function(e,i){t.remove("destination[region]["+e+"]")}),e(".region-list .filter-choice-init.filter-selected").each(function(i,n){t.set("destination[region]["+i+"]",e(n).attr("data-filter-choice"))})})},guestListener:function(){e(".guest-list .filter-choice-init").on("click",function(){var i=e(this),n=i.attr("data-filter-choice").replace("sleeps-","");nret.destinationListing.els.guestLabel.html(i.html()),i.toggleClass("filter-selected"),e(".guest-list").find(".filter-selected").not(i).removeClass("filter-selected"),t.set("nret[guests]",n)})},deleteForeignCookies:function(){e.each(document.cookie.split(/; */),function(){var e=this.split("=");["retreat_list","journal_list"].forEach(function(i){e[0].indexOf(i)!==-1&&t.remove(decodeURIComponent(e[0]))})})},readRegionCookies:function(){var i,n=e(".region-list .filter-choice-init");n.each(function(i){var n=t.get("destination[region]["+i+"]");n&&e(".region-list .filter-choice-init[data-filter-choice="+n+"]").addClass("filter-selected")}),i=e(".region-list .filter-choice-init.filter-selected").length,i>1?nret.destinationListing.els.regionLabel.html("Region ("+i+")"):nret.destinationListing.els.regionLabel.html("Region")},readGuestsCookie:function(){var i,n=t.get("nret[guests]");n&&(e(".guest-list .filter-choice-init[data-filter-choice=sleeps-"+n+"]").addClass("filter-selected"),i=parseInt(n),1===i?nret.destinationListing.els.guestLabel.html("1 guest"):nret.destinationListing.els.guestLabel.html(i+" guests"))},toggleListMap:function(){e(".destination-listing__toggle-btn").on("click",function(){"destinationListingListToggle"===e(this).attr("id")?nret.destinationListing.toggleShowList():"destinationListingMapToggle"===e(this).attr("id")&&nret.destinationListing.toggleShowMap()})},toggleShowMap:function(){e("#destinationListingListToggle").removeClass("btn__blue").addClass("btn__transparent"),e("#destinationListingMapToggle").removeClass("btn__transparent").addClass("btn__blue"),e(".destination-listing__row").velocity({opacity:0},{display:"none"}),e(".destination-listing__map").velocity("transition.slideUpIn")},toggleShowList:function(){e("#destinationListingMapToggle").removeClass("btn__blue").addClass("btn__transparent"),e("#destinationListingListToggle").removeClass("btn__transparent").addClass("btn__blue"),e(".destination-listing__map").velocity({opacity:0},{display:"none"},{duration:"100"}),e(".destination-listing__row").delay(200).velocity("transition.slideUpIn")},closeMapCard:function(){e(".map-card__close").on("click",function(){e(this).parents(".map-card__container").removeClass("show")})},init:function(){nret.destinationListing.els={guestLabel:e("#guests-label"),regionLabel:e("#region-label")},nret.destinationListing.deleteForeignCookies(),nret.destinationListing.readRegionCookies(),nret.destinationListing.readGuestsCookie(),nret.destinationListing.setResultsNum(),nret.destinationListing.clearListener(),nret.destinationListing.regionListener(),nret.destinationListing.guestListener(),nret.destinationListing.toggleListMap(),nret.destinationListing.closeMapCard()}}}(jQuery,Cookies);var nret=nret||{};!function(e,t){var i,n,o="M dd",a="dd-M-yy",r=window.innerWidth<769?1:2;e("#home").length>0||e("#retreat-search").length>0?(i=e("#bookingCheckIn"),n=e("#bookingCheckOut"),e(".destination-check-in-nav").prop("disabled",!0)):(i=e("#bookingCheckInNav"),n=e("#bookingCheckOutNav"));var s=function(){function e(){o(),a()}function o(){r.checkInDatepicker.clear(),t.remove("nret[start_date]")}function a(){r.checkOutDatepicker.clear(),t.remove("nret[end_date]")}var r=this;r.checkInDatepicker=void 0,r.checkOutDatepicker=void 0,r.clear=e,r.clearCheckInDatepicker=o,r.clearCheckOutDatepicker=a,function(){r.checkInDatepicker=new c(r),r.checkOutDatepicker=new l(r);var e=t.get("nret[start_date]"),o=t.get("nret[end_date]");if(e&&o){var a=e.toLowerCase().split("-"),s=o.toLowerCase().split("-"),d=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],u=d.indexOf(a[1]),h=d.indexOf(s[1]),p=new Date(a[2],u,a[0]),f=new Date(s[2],h,s[0]);i.datepicker("setDate",p),n.is(":disabled")&&n.prop("disabled",!1);var m=i.datepicker("getDate");n.datepicker("option","defaultDate",m),n.datepicker("setDate",f)}}()},c=function(s){function c(){clearTimeout(m),e("#ui-datepicker-div .ui-datepicker-calendar").is(":visible")?(e(".ui-datepicker-prev:not(.ui-state-disabled), .ui-datepicker-next:not(.ui-state-disabled)").click(function(){l()}),e(".clear-dates button, button.clear-dates").on("click",function(){s.clear()})):m=setTimeout(c,10)}function l(){if(!e.contains(".home__search__check-in-wrapper","#ui-datepicker-div")){e("#ui-datepicker-div").detach().appendTo(".home__search__check-in-wrapper")}c()}function d(e){if(e<=new Date)return[!1,"",null];var t=i.datepicker("getDate"),o=n.datepicker("getDate"),a="";return t&&e.getTime()===t.getTime()&&(a+=" check-in-date"),o&&e.getTime()===o.getTime()&&(a+=" check-out-date"),t&&o&&e<o&&e>t&&(a+=" in-between"),[!0,a.trim(),null]}function u(){var r=i.datepicker("getDate"),s=(n.datepicker("getDate"),e.datepicker.formatDate(a,r).toUpperCase()),c=e.datepicker.formatDate(o,r).toUpperCase();nret.home.els.checkInLabel.text(c.toLowerCase()),nret.home.els.checkInSubLabel.addClass("show"),t.set("nret[start_date]",s),n.is(":disabled")&&n.prop("disabled",!1),n.datepicker("setDate",r),nret.header.els.retreatSearch.hasClass("show")?e(".initHomeDropdown.check-out").eq(0).trigger("click"):e(".initHomeDropdown.check-out").eq(1).trigger("click"),e("#retreat-search").length&&e(".checkout-label").trigger("click"),setTimeout(function(){n.datepicker("show")},250),nret.home.closeCheckInOpenCheckOut()}function h(){i.datepicker("setDate",null).datepicker("hide").blur(),n.prop("disabled",!0).blur(),nret.home.els.checkInLabel.text("Check In")}function p(){i.datepicker("refresh"),l()}var f=this;f.clear=h,f.refresh=p,function(){i.datepicker({dateFormat:i.data("dateFormat"),minDate:0,numberOfMonths:r,beforeShow:l,beforeShowDay:d,onSelect:u})}();var m},l=function(s){function c(){clearTimeout(m),e("#ui-datepicker-div .ui-datepicker-calendar").is(":visible")?(e(".ui-datepicker-prev:not(.ui-state-disabled), .ui-datepicker-next:not(.ui-state-disabled)").click(function(){l()}),e(".clear-dates button, button.clear-dates").on("click",function(){s.clear()}),window.innerWidth>=769&&e("#ui-datepicker-div tbody td").on("mouseenter",function(){if(!e(this).hasClass("ui-datepicker-other-month")){var t=i.datepicker("getDate"),o=n.datepicker("getDate");if(t&&!o){var a=e("#ui-datepicker-div tbody td").index(this),r=e("#ui-datepicker-div tbody td.check-in-date"),s=r.length?e("#ui-datepicker-div tbody td").index(r):0;e("#ui-datepicker-div tbody td").each(function(t,i){return!!(t<s||e(i).hasClass("check-in-date"))||!(t>=a)&&void e(i).addClass("hover-in-between")})}}}).on("mouseleave",function(){e("#ui-datepicker-div tbody td").removeClass("hover-in-between")})):m=setTimeout(c,10)}function l(t){if(!e.contains(".home__search__check-out-wrapper","#ui-datepicker-div")){e("#ui-datepicker-div").detach().appendTo(".home__search__check-out-wrapper")}c()}function d(e){if(e<new Date)return[!1,"",null];var t=i.datepicker("getDate"),o=n.datepicker("getDate"),a="";return t&&e.getTime()===t.getTime()&&(a+=" check-in-date"),o&&e.getTime()===o.getTime()&&(a+=" check-out-date"),t&&o&&e<o&&e>t&&(a+=" in-between"),[!0,a.trim(),null]}function u(){var r=i.datepicker("getDate"),s=n.datepicker("getDate"),c=e.datepicker.formatDate(a,s).toUpperCase(),l=e.datepicker.formatDate(o,s).toUpperCase();if(nret.home.els.checkOutLabel.text(l.toLowerCase()),nret.home.els.checkOutSubLabel.addClass("show"),t.set("nret[end_date]",c),n.datepicker("option","defaultDate",r),r&&s){var d=Math.abs(s.getTime()-r.getTime()),u=Math.round(d/864e5);t.set("nret[nights]",u)}e(".home__search__check-out-wrapper").removeClass("show-now show open")}function h(){i.blur(),n.datepicker("setDate",null).datepicker("hide").blur(),nret.home.els.checkOutLabel.text("Check Out")}function p(){n.datepicker("refresh"),l()}var f=this;f.clear=h,f.refresh=p,function(){n.datepicker({dateFormat:n.data("dateFormat"),minDate:0,numberOfMonths:r,beforeShow:l,beforeShowDay:d,onSelect:u})}();var m};nret.home={addBodyClass:function(){e("#home").length>0&&e("body").addClass("home-page")},closeNavBanner:function(){e(".global-nav__banner").velocity({opacity:0},500,function(){e(this).remove()}),e(".global-nav").velocity({top:0},200),e(".explorer__help-modal").velocity({top:120},{delay:200,duration:180})},closeNavBannerEvent:function(){e("#navBannerClose").on("click",function(){nret.home.closeNavBanner()}),window.setTimeout(nret.home.closeNavBanner,1e4)},openExploreChoiceList:function(e){var t=e.find(".home__choices__list-wrapper");e.hasClass("open")&&t.velocity({opacity:1},{display:"block"})},closeExplorerChoiceList:function(){e(".home__choices__list-wrapper").velocity({opacity:0},{display:"none"})},openExploreChoiceListEvent:function(){e(".dropdown").find(".inner").on("click",function(){var t=e(this);t.hasClass("open")?t.removeClass("open"):(e(".dropdown").find(".inner").not(t).removeClass("open"),t.addClass("open")),nret.home.closeExplorerChoiceList(),nret.home.openExploreChoiceList(t)})},initHomeSearchByDateEvent:function(){e("#dateSearch").on("click",function(){e(this).addClass("active"),e("#exploreSearch").removeClass("active"),nret.home.openHomeSearchByDate()})},initHomeExploreEvent:function(){e("#exploreSearch").on("click",function(){window.location.href="/destination",e(this).addClass("active"),e("#dateSearch").removeClass("active")})},openHomeSearchByDate:function(){nret.home.els.homeSearchDropdownTitle.addClass("show"),nret.home.els.choicesSearchDropdownWrapper.addClass("show"),e(".choices-explore, .home__choices__list-wrapper").removeClass("show")},openHomeExplore:function(){nret.home.els.homeSearchDropdownTitle.removeClass("show"),nret.home.els.choicesSearchDropdownWrapper.removeClass("show"),e(".choices-explore").addClass("show"),e(".home__search__dropdown").removeClass("show")},openSearchByDateDropdown:function(){var t=e(".initHomeDropdown");t.on("click",function(){var i=e(this).find(".home__search__choice");if(t.attr("data-home-search")){var n=e(this).attr("data-home-search"),o=e(this).parents(".home__retreat-search").find('.home__search__dropdown[data-home-search="'+n+'"]');o.toggleClass("show open"),e(".home__search__dropdown").not(o).removeClass("show open")}e(".home__search__choice").not(i).removeClass("active"),i.addClass("active")})},changeStartBtnColorOnSelection:function(){var t=e(".home__search__choice");"Destination"!==t.eq(0).text()&&"Check-In"!==t.eq(1).text()&&"Check-Out"!==t.eq(2).text()&&"Guests"!==t.eq(3).text()&&e("#initHomeSearch").addClass("btn__blue").removeClass("btn__transparent")},closeCheckInOpenCheckOut:function(){e("body").hasClass("home-page")&&(e(".home__search__check-in-wrapper").removeClass("show"),e(".home__search__check-out-wrapper").addClass("show-now open")),e(".filter__filter-option__calendar").length&&(e(".filter-option__calendar-check-in").removeClass("show"),e(".filter-option__calendar-check-out").addClass("show"),e(".filter__options-wrapper__filter-option.filter-option-check-in").removeClass("open"),e(".filter__options-wrapper__filter-option.filter-option-check-out").addClass("open"))},selectLocationValueEvent:function(){e(".home__search__dropdown-location-block").find("a").on("click",function(){var t=e(this);nret.home.selectLocationValue(t)})},selectLocationValue:function(e){var t=e.text();nret.home.els.homeSearchDropdownTitle.find('.title[data-home-search="location"]').html(t+'<span class="icon icon_carrot-down"></span>')},saveDataFromClicksOnHomeSearch:function(){e("a[data-home-bedrooms]").on("click",function(i){var n=e(this).attr("data-home-bedrooms"),o=" Bedrooms";"1"===n&&(o=" Bedroom"),e(this).addClass("filter-selected"),e("a[data-home-bedrooms]").not(e(this)).removeClass("filter-selected"),e(".bedrooms.home__search__choice").html(e(this).html()+o),e('ul[data-home-search="bedrooms"]').removeClass("show"),t.set("retreat_list[bedrooms]",n),nret.home.changeStartBtnColorOnSelection(),i.stopPropagation()}),e("a[data-home-experience]").on("click",function(){var i=e(this).attr("data-home-experience");t.set("destination_experience",i),nret.home.changeStartBtnColorOnSelection()}),e("a[data-home-environment]").on("click",function(){var i=e(this).attr("data-home-environment");t.set("destination_environment",i),nret.home.changeStartBtnColorOnSelection()})},initLocationTabs:function(){e(".region-titles .title").on("click",function(){var t=e(this),i=t.index();e(".region-titles .current.title").removeClass("current"),e(".destination-groups .current.group").removeClass("current"),t.addClass("current"),e(".destination-groups").find(".group").eq(i).addClass("current")})},homepageVideoController:function(){if(e(".video__bg").length){var t,i=e(".video__bg"),n=i.data("videourl"),o=(e(".video-toggle").find("p"),0);return{init:function(){var e=this.createVideoContainer();i.append(e)},changeHomepageVideo:function(e){(o=e||o+1)>n.length-1&&(o=0);var t=this.createVideoContainer();i.prepend(t)},createVideoContainer:function(){var i='<video poster="" preload="auto" id="homeBgVid" muted>';return i+='<source class="mp4" src="'+n[o]+'" type="video/mp4">',i+="</video>",i=e(i),i.on("canplay",function(){this.play()}),i.on("ended",function(){this.changeHomepageVideo()}.bind(this)),t?t.animate({opacity:0},800,function(){t.remove(),t=i}):t=i,i}}}},deleteForeignCookies:function(){e.each(document.cookie.split(/; */),function(){var e=this.split("=");["destination","retreat_list","journal_list"].forEach(function(i){
e[0].indexOf(i)!==-1&&t.remove(decodeURIComponent(e[0]))})})},readCookies:function(){var i=t.get("nret[start_date]"),n=moment(i,"DD-MMM-YYYY").format("MMM Do"),o=t.get("nret[end_date]"),a=moment(o,"DD-MMM-YYYY").format("MMM Do"),r=t.get("nret[location_id]"),s=t.get("retreat_list[bedrooms]");if(i&&(console.log(),nret.home.els.checkInLabel.text(n),nret.home.els.checkInSubLabel.addClass("show")),o&&(nret.home.els.checkOutLabel.text(a),nret.home.els.checkOutSubLabel.addClass("show")),r){r=r.split(",");var c=r.length,l=" Destinations";1===r&&(l=" Destination"),e(".destination.home__search__choice").text(c+l),e(".global-nav__destination-list").find("input").each(function(){var t=e(this);e(r).each(function(e,i){t.attr("data-home-location")===i&&t.prop("checked",!0)})})}if(s){var d=" Bedrooms";"1"===s&&(d=" Bedroom"),"0"!==s?e(".bedrooms.home__search__choice, #bedroom-label").text(s+d):e(".bedrooms.home__search__choice, #bedroom-label").text("Select Destination")}},scrollToBookingWidget:function(){e(".scroll-once").on("click","h3",function(){e(".home__retreat-search-container").hasClass("scroll-once")&&e(".scroll-to-search").velocity("scroll",{duration:600,offset:-330,easing:"ease-in-out"}),e(".home__retreat-search-container").removeClass("scroll-once")})},init:function(){nret.home.els={checkInLabel:e(".checkin-label"),checkInSubLabel:e(".checkin-sublabel"),checkOutLabel:e(".checkout-label"),checkOutSubLabel:e(".checkout-sublabel"),homeSearchDropdownTitle:e(".home__search__dropdown-title"),choicesSearchDropdownWrapper:e(".choices-search__dropdown-wrapper")},nret.home.initHomeSearchByDateEvent(),nret.home.closeNavBannerEvent(),nret.home.saveDataFromClicksOnHomeSearch(),nret.home.addBodyClass(),nret.home.initHomeExploreEvent(),nret.home.selectLocationValueEvent(),nret.home.openSearchByDateDropdown(),nret.home.initLocationTabs(),nret.home.readCookies(),new s;var t=new this.homepageVideoController;e(".video__bg").length&&t.init()}},jQuery(document).ready(function(){nret.home.init()})}(jQuery,Cookies);var nret=nret||{};!function(e){nret.journal={setFeaturedArticleToTop:function(){var t=e(".journal-listing__featured-article").eq(0);e("#journalArticleContainer").prepend(t)},setJournalCookeis:function(){e("a[data-journal-type]").on("click",function(){var t=e(this).attr("data-journal-type");Cookies.set("journal_list[type]",t),e("a[data-journal-type]").removeClass("filter-selected"),e(this).toggleClass("filter-selected")}),e("a[data-journal-location]").on("click",function(){var t=e(this).attr("data-journal-location");Cookies.set("journal_list[location]",t),e("a[data-journal-location]").removeClass("filter-selected"),e(this).toggleClass("filter-selected")}),e("a[data-journal-environment]").on("click",function(){var t=e(this).attr("data-journal-environment");Cookies.set("journal_list[environment]",t),e("a[data-journal-environment]").removeClass("filter-selected"),e(this).toggleClass("filter-selected")}),e("a[data-journal-experience]").on("click",function(){var t=e(this).attr("data-journal-experience");Cookies.set("journal_list[experience]",t),e("a[data-journal-experience]").removeClass("filter-selected"),e(this).toggleClass("filter-selected")})},removeJournalCookies:function(){e(".filter__clear").on("click",function(){Cookies.remove("journal_list[type]"),Cookies.remove("journal_list[location]"),Cookies.remove("journal_list[environment]"),Cookies.remove("journal_list[experience]"),window.location.reload()})},deleteForeignCookies:function(){e.each(document.cookie.split(/; */),function(){var e=this.split("=");["destination","retreat_list"].forEach(function(t){e[0].indexOf(t)!==-1&&Cookies.remove(decodeURIComponent(e[0]))})})},loadMoreJournalArticles:function(){var t,i=1,n=!1,o=e("#journalLoader");e(window).scroll(function(){e(window).scrollTop()+e(window).height()>e(document).height()-800&&0==n&&(n=!0,o.fadeIn(),e.ajax({url:Drupal.settings.basePath+"views/ajax",type:"post",data:{view_name:"journal_list",view_display_id:"page",page:i},dataType:"json",success:function(a){if(void 0!==a[1]){var r=a[1].data;t=e("<div></div>"),t.html(r);var s=e(".news-block, .journal-listing__featured-article",t),c=e("#journalArticleContainer");o.fadeOut(),c.append(s),Drupal.attachBehaviors(),i++,t=void 0,n=!1,s.length<8&&(n=!0)}}}))})},init:function(){nret.journal.setFeaturedArticleToTop(),nret.journal.deleteForeignCookies(),nret.journal.setJournalCookeis(),nret.journal.removeJournalCookies(),nret.journal.loadMoreJournalArticles()}}}(jQuery);var nret=nret||{};!function(e){nret.offer={setofferCookeis:function(){e("a[data-offer-type]").on("click",function(){var t=e(this).attr("data-offer-type");Cookies.set("offer_list[type]",t)}),e("a[data-offer-location]").on("click",function(){var t=e(this).attr("data-offer-location");Cookies.set("offer_list[location]",t)})},removeofferCookies:function(){e(".filter__clear").on("click",function(){Cookies.remove("offer_list")})},adjustFilterTextOnLoad:function(){Cookies.get("offer_list[location]"),Cookies.get("offer_list[type]"),Cookies.get("offer_list[environment]"),Cookies.get("offer_list[location]")},init:function(){nret.offer.setofferCookeis(),nret.offer.removeofferCookies()}},jQuery(document).ready(function(){e("body").hasClass("page-offers")&&nret.offer.init()})}(jQuery);var nret=nret||{};!function(e){nret.page_promotion={triggerClickOnSelect:function(){e(".select__wrapper").on("click",function(){e(this).find("select").trigger("click")})},changeDropdownValue:function(){e(".select__wrapper").find("select").on("change",function(){val=e(this).val(),e(this).parent(".select__wrapper").find(".select-text").text(val)})},validateFormFields:function(){var t=!0,i=e(".validate-email").val(),n=[];nret.helpers.validateEmail(i)===!1&&(t=!1,e(".validate-email").addClass("error")),e(".validate-text").each(function(){""===e(this).val()&&(t=!1,e(this).addClass("error"))}),e(".validate-select").each(function(){null===e(this).val()&&(t=!1,e(this).parent().addClass("error"))}),e("#toc").is(":checked")||(t=!1,e(".toc-error").addClass("error")),t===!0&&(e('input:checked[name="Answer2[]"]').each(function(){n.push(e(this).val()),e(this).attr("disabled",!0)}),e("#answer2_array").val(n.join(";")),nret.page_promotion.sendFormToNRES())},sendFormToNRESEvent:function(){e("#airbnbCompFormSubmit").on("click",function(e){nret.page_promotion.validateFormFields()})},sendFormToNRES:function(){var t=e("form#airbnbCompForm"),i=t.serialize();e.ajax({url:"/api/v1/newsletter",type:"POST",data:i,dataType:"json",success:function(t){e(".success-remove").fadeOut(function(){e(this).remove(),e(".promo__form-wrapper").find(".container").addClass("success"),e(".copy__thank-you").fadeIn(),e(".promotion").addClass("success"),e(".promo__form-wrapper").addClass("success"),e(".legal").remove()})}})},openTCModal:function(){e(".initToc").on("click",function(){nret.page_promotion.els.promotionTerms.addClass("show")})},closeTCModal:function(){nret.page_promotion.els.promotionTerms.on("click",function(e){e.target===this&&nret.page_promotion.els.promotionTerms.removeClass("show")})},init:function(){nret.page_promotion.els={promotionTerms:e(".promotion__terms-service")},nret.page_promotion.sendFormToNRESEvent(),nret.page_promotion.changeDropdownValue(),nret.page_promotion.openTCModal(),nret.page_promotion.closeTCModal()}}}(jQuery);var nret=nret||{};!function(e){nret.page_retreatSearch={openDestinationList:function(){var t=e(".global-nav__destinations__destination-list-wrapper");e("#destination-label").on("click",function(){e(".growMeMore, .growMe").not(t).removeClass("show"),t.toggleClass("show")})},viewMore:function(){e(".retreat-view-more").on("click",function(t){t.preventDefault();for(var i=e(".retreats-search-results .retreat-listing__block-small.hide"),n=0;n<30;n++)e(i[n]).length>0?e(i[n]).removeClass("hide").addClass("show"):e(".retreat-view-more").fadeOut()})},initResults:function(){for(var t=e(".retreats-search-results .retreat-listing__block-small"),i=0;i<30;i++)e(t[i])&&e(t[i]).removeClass("hide").addClass("show");t.length<20&&e(".too-many-results").hide(),t.length<=30&&e(".retreat-view-more").hide()},init:function(){nret.page_retreatSearch.openDestinationList(),nret.page_retreatSearch.initResults(),nret.page_retreatSearch.viewMore()}}}(jQuery);var nret=nret||{};!function(e){nret.retreatDetail={scrollToReview:function(){"#reviews"==window.location.hash&&e(".product__reviews").velocity("scroll",{duration:600,offset:-180,easing:"ease-in-out"})},init:function(){nret.retreatDetail.scrollToReview()}}}(jQuery);