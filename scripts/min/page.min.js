var nret=nret||{};!function(e){nret.helpers={isIe:function(){e(window).load(function(){navigator.userAgent.match(/Trident.*rv:11\./)&&nret.helpers.els.body.addClass("ie11")})},awfulFixToMobileSearchBarNotFocusing:function(){e("#globalSearchMbl").find("input").on("touchstart",function(){e(this).css("width","84%")})},countrySelectEvent:function(){e("#initCountrySelect").on("click",function(){e(".global-nav__banner__country-dropdown").toggleClass("open")})},disableScrolling:function(){e.fn.scrollLock=function(){return e(this).on("DOMMouseScroll mousewheel",function(t){var n=e(this),o=this.scrollTop,i=this.scrollHeight,a=n.height(),r=t.originalEvent.wheelDelta,s=r>0,l=function(){return t.stopPropagation(),t.preventDefault(),t.returnValue=!1,!1};return!s&&-r>i-a-o?(n.scrollTop(i),l()):s&&r>o?(n.scrollTop(0),l()):void 0})},e.fn.scrollRelease=function(){return e(this).off("DOMMouseScroll mousewheel")}},closeElementOnDocumentClick:function(){e(document).on("click",function(t){e(t.target).closest(".doNotClose, .ui-icon, .ui-corner-all").length||(e(".open").removeClass("show show-now"),e(".filter__options-wrapper__filter-option").length&&e(".filter__options-wrapper__filter-option").removeClass("open"))})},whatTypeOfDevice:function(){"Tablet"==WURFL.form_factor?(nret.helpers.els.body.addClass("device-tablet"),nret.helpers.els.body.addClass("mobile")):"Smartphone"==WURFL.form_factor?(nret.helpers.els.body.addClass("device-phone"),nret.helpers.els.body.addClass("mobile")):(nret.helpers.els.body.addClass("device-desktop"),nret.helpers.els.body.addClass("desktop"))},triggerClickOnFooterNewsletterLink:function(){if(nret.helpers.els.body.hasClass("mobile")){e(".footer__item.newsletter").find(".footer__item-title").on("click",function(){e(this).next().trigger("click")})}},validateEmailEvent:function(){e(".form-submit").on("submit",function(){var t=e(this).find(".email-validation"),n=t.val();return 0!=nret.helpers.validateEmail(n)})},validateEmail:function(e){return/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(e)},noLink:function(){e(".nolink").on("click",function(e){e.preventDefault()})},lazyLoad:function(){e(".lazy").lazyload({threshold:500})},openMoreOnActivitiesMapListEvent:function(){e(".image-on-image__intro-copy__list-item").find("h4").on("click",function(){var t=e(this).parent();t.hasClass("open")?e(".image-on-image__intro-copy__list-item").removeClass("open"):(e(".image-on-image__intro-copy__list-item").not(t).removeClass("open"),t.addClass("open")),nret.helpers.closeMoreOnActivitiesMapList(t),nret.helpers.openMoreOnActivitiesMapList(t)})},openMoreOnActivitiesMapList:function(e){e.hasClass("open")&&(e.find(".long-dash").velocity({width:30,marginRight:10},{duration:200}),e.find(".image-on-image__list-copy").velocity({maxHeight:600,opacity:1},{duration:800}))},closeMoreOnActivitiesMapList:function(t){e(".image-on-image__intro-copy__list-item").find(".long-dash").velocity({width:0,marginRight:0}),e(".image-on-image__intro-copy__list-item").find(".image-on-image__list-copy").velocity({maxHeight:0,opacity:0})},revealHidden:function(){e(".hide-block").each(function(t,n){var n=e(n);n.visible(!0)&&n.addClass("reveal-block")})},revealHiddenOnScroll:function(){nret.helpers.els.win.scroll(function(e){nret.helpers.revealHidden()})},phoneHelperOpen:function(){e(".explorer__help-modal-inner").velocity({opacity:1},{display:"flex"})},phoneHelperClose:function(){e(".explorer__help-modal-inner").velocity({opacity:0},{display:"none"}),e(".explorer__help-modal").velocity({backgroundColorAlpha:0})},phoneHelperCloseAfterTime:function(){function t(){e(".explorer__phone").find(".inner").hasClass("fresh")&&(nret.helpers.phoneHelperClose(),e(".explorer__phone").find(".inner").removeClass("open"))}window.setTimeout(t,1e4)},phoneHelperEvent:function(){e(".explorer__phone").find(".inner").on("click",function(){e(this).removeClass("fresh"),e(this).hasClass("open")?(nret.helpers.phoneHelperClose(),e(this).removeClass("open")):(e(this).addClass("open"),nret.helpers.phoneHelperOpen())})},animateIdlePhone:function(){function t(){setInterval(n,5e4)}function n(){e(".explorer__phone").find(".inner").hasClass("open")||e(".explorer__phone").addClass("tada").delay(1200).queue(function(t){e(this).removeClass("tada"),t()})}window.setTimeout(t,1e4)},sortDestinationNamesAlphabeticallyByState:function(){$groups=e(".sort-list");var t=function(t,n){return t=e(t).find(".strike").text().split(","),n=e(n).find(".strike").text().split(","),t=t[t.length-1],n=n[n.length-1],t==n?0:t<n?-1:1},n=function(t,n){return t=e(t).find(".strike").text(),n=e(n).find(".strike").text(),t==n?0:t<n?-1:1},o=function(e,o){return t(e,o)||n(e,o)};$groups.each(function(){var t=e(this).find("li"),n=t.sort(o);e(this).html(n)})},dropdownEvents:function(){e(".select-dropdown").not(".region").on("click",function(){var t=e(this),n=e(this).next().attr("id");nret.helpers.showDropdown(n),nret.helpers.changeDropdownTabValue(t)}),e(".select-wrapper select, .state-select-wrapper select, .contact__topic-wrapper select").not("#acquisitionFormRegion").unbind("change").on("change",function(){var t=e(this).prev(),n=e(this).val();t.html(n+'<span class="icon icon_carrot-down"></span>')})},changeDropdownTabValue:function(e){$this=e,$this.next().unbind("change").on("change",function(){val=$this.next().val(),$this.html(val+'<span class="icon icon_carrot-down"></span>')})},showDropdown:function(e){var t,n=document.getElementById(e);t=document.createEvent("MouseEvents"),t.initMouseEvent("mousedown",!0,!0,window),n.dispatchEvent(t)},openMobileAmenitiesList:function(e){var t=e.next();t.hasClass("grow")?t.removeClass("grow"):t.addClass("grow")},openMobileAmenitiesListEvent:function(){e(".amenities-block").find("header").on("click",function(){$this=e(this),nret.helpers.openMobileAmenitiesList($this),$this.find(".icon").toggleClass("open")})},adjustMarginTopForElementBelowHomeHero:function(){if(e(window).innerHeight()>0&&nret.helpers.els.body.hasClass("desktop")&&e(".hero-el").length>0){var t=e(".hero-el").innerHeight()-40;e(".hero-el__below").css("marginTop",t)}},adjustMarginTopOnResize:function(){e(window).on("resize",function(){nret.helpers.adjustMarginTopForElementBelowHomeHero()})},openCalOnLabelClick:function(){e(".cal").find(".input-label").on("click",function(){e(".cal").find(".input-container").removeClass("show"),e(this).siblings(".input-container").toggleClass("show"),e(".growMeMore, .growMe").removeClass("show")})},init:function(){nret.helpers.els={body:e("body"),win:e(window)},nret.helpers.noLink(),nret.helpers.isIe(),nret.helpers.openCalOnLabelClick(),nret.helpers.whatTypeOfDevice(),nret.helpers.lazyLoad(),nret.helpers.sortDestinationNamesAlphabeticallyByState(),nret.helpers.openMoreOnActivitiesMapListEvent(),nret.helpers.revealHidden(),nret.helpers.revealHiddenOnScroll(),nret.helpers.dropdownEvents(),nret.helpers.disableScrolling(),nret.helpers.closeElementOnDocumentClick(),nret.helpers.phoneHelperEvent(),nret.helpers.phoneHelperCloseAfterTime(),nret.helpers.animateIdlePhone(),nret.helpers.validateEmailEvent(),nret.helpers.openMobileAmenitiesListEvent(),nret.helpers.countrySelectEvent(),nret.helpers.awfulFixToMobileSearchBarNotFocusing(),nret.helpers.triggerClickOnFooterNewsletterLink(),nret.helpers.adjustMarginTopForElementBelowHomeHero(),nret.helpers.adjustMarginTopOnResize()}},jQuery(document).ready(function(){nret.helpers.init()})}(jQuery);var nret=nret||{};!function(e){nret.about={embedInstagramPics:function(){new Instafeed({get:"user",userId:"1101490324",clientId:"c8d28a45dd02413e975170c69d007168",sortBy:"most-recent",resolution:"standard_resolution",template:'<div class="instagram-block" style="background:url({{image}}) no-repeat center center;background-size:contain;background-position:top;"><div class="instagram-block__cta"><span class="icon icon_instagram"></span></div></div>',limit:2}).run()},controlPlaybackOnAbout:function(){var t=document.getElementById("aboutBgVid");e("#launchMobileAboutVideo").on("click",function(){t.webkitEnterFullscreen(),t.play()})},init:function(){nret.about.embedInstagramPics(),nret.about.controlPlaybackOnAbout()}}}(jQuery);var nret=nret||{};!function(e){nret.page_booking={showPageContents:function(){e(".booking-page").find("> .wrapper").addClass("show")},init:function(){nret.page_booking.showPageContents()}},jQuery(document).ready(function(){e(".booking-page").length>0&&nret.page_booking.init()})}(jQuery);var nret=nret||{};!function(e,t){var n="dd-M-yy",o="M dd",i=window.innerWidth<769?1:2,a=e("#destination-check-in"),r=e(".checkin-sublabel"),s=e("#destination-check-out"),l=e(".check-in-overlay"),c=e(".checkout-sublabel"),d=e(".check-out-overlay"),u=e("#booking-error"),p=(e("#bookingWidgetForm"),e('#bookingWidgetForm button[type="submit"]')),h=function(){function n(){i(),r()}function i(){k.checkInDatepicker.clear(),t.remove("nret[start_date]")}function r(){k.checkOutDatepicker.clear(),k.departureDates=[],t.remove("nret[end_date]")}function c(){u.hide().text(""),p.removeClass("booking-error")}function h(){e("#calendar-error").remove()}function g(e){u.show().text(e),p.addClass("booking-error")}function v(t){var n=['<div id="calendar-error">',"<p>"+t+"</p>",'<button class="launch-enquiry">Ask about these dates <span class="side-arrow"></span></button>',"</div>"].join("");e("#calendar-legend").before(n),e(".launch-enquiry").click(function(){e(".retreat-detail__enquiry-window").addClass("show"),e(".retreat-detail__enquiry-window").scrollLock()})}var k=this;k.arrivalDates=[],k.departureDates=[],k.checkInDatepicker=void 0,k.checkOutDatepicker=void 0,k.clear=n,k.clearCheckInDatepicker=i,k.clearCheckOutDatepicker=r,k.hideFilterError=c,k.hideCalendarError=h,k.showFilterError=g,k.showCalendarError=v,function(){k.checkInDatepicker=new m(k),k.checkOutDatepicker=new f(k);var n=t.get("nret[start_date]"),i=t.get("nret[end_date]");if(n&&i){var r=n.toLowerCase().split("-"),c=i.toLowerCase().split("-"),u=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],p=u.indexOf(r[1]),h=u.indexOf(c[1]),g=new Date(r[2],p,r[0]),v=new Date(c[2],h,c[0]);a.datepicker("setDate",g);var _=e.datepicker.formatDate(o,g).toUpperCase();l.text(_),s.is(":disabled")&&s.prop("disabled",!1);var C=a.datepicker("getDate");s.datepicker("option","defaultDate",C),s.datepicker("setDate",v);var b=e.datepicker.formatDate(o,v).toUpperCase();d.text(b)}}()},m=function(c){function d(){clearTimeout(k),e("#ui-datepicker-div .ui-datepicker-calendar").is(":visible")?(e(".ui-datepicker-prev:not(.ui-state-disabled), .ui-datepicker-next:not(.ui-state-disabled)").click(function(){u()}),e(".clear-dates button, button.clear-dates").on("click",function(){c.clear()}),e(".ui-state-default").on("click",function(){e(".ui-state-default").parent().removeClass("calendar-error");var t=e(this),n=t.parent().data("year"),o=t.parent().data("month"),i=t.text(),a=new Date;a.setFullYear(n,o,i),h(a)||(event.preventDefault(),event.stopPropagation(),e(this).parent().addClass("calendar-error"))})):k=setTimeout(d,10)}function u(){if(window.innerWidth<769&&!e.contains(".filter-option-check-in","#ui-datepicker-div")){e("#ui-datepicker-div").detach().appendTo(".filter-option-check-in")}d()}function p(e){if(e<=new Date)return[!1,"",null];var t=a.datepicker("getDate"),n=s.datepicker("getDate"),o="";return t&&e.getTime()===t.getTime()&&(o+=" check-in-date"),n&&e.getTime()===n.getTime()&&(o+=" check-out-date"),t&&n&&e<n&&e>t&&(o+=" in-between"),[!0,o.trim(),null]}function h(e){c.hideCalendarError();var t,n=new Date;return e<=n?(c.showCalendarError("Sorry, the date you have selected is not available."),t=!1):t=!0,t}function m(){var i=a.datepicker("getDate"),d=s.datepicker("getDate"),u=e.datepicker.formatDate(n,i).toUpperCase(),p=e.datepicker.formatDate(o,i).toUpperCase();l.text(p),t.set("nret[start_date]",u),e(".filter__cal-wrapper-out").length>0&&(e(".filter__cal-wrapper-in").removeClass("show"),e(".filter__cal-wrapper-out").addClass("show")),s.is(":disabled")&&s.prop("disabled",!1),s.datepicker("option","defaultDate",i),d||setTimeout(function(){s.datepicker("show")},250),r.addClass("show"),c.clearCheckOutDatepicker()}function f(){a.datepicker("setDate",null).datepicker("hide").blur(),l.text("Select Date"),s.prop("disabled",!0).blur()}function g(){a.datepicker("refresh"),u()}var v=this;v.clear=f,v.refresh=g,function(){a.datepicker({dateFormat:a.data("dateFormat"),minDate:0,numberOfMonths:i,beforeShow:u,beforeShowDay:p,onSelect:m})}();var k},f=function(r){function l(){clearTimeout(k),e("#ui-datepicker-div .ui-datepicker-calendar").is(":visible")?(e(".ui-datepicker-prev:not(.ui-state-disabled), .ui-datepicker-next:not(.ui-state-disabled)").click(function(){u()}),e(".clear-dates button, button.clear-dates").on("click",function(){r.clear()}),e(".ui-state-default").on("click",function(){e(".ui-state-default").parent().removeClass("calendar-error");var t=e(this),n=t.parent().data("year"),o=t.parent().data("month"),i=t.text(),a=new Date;a.setFullYear(n,o,i),h(a,this)||(event.preventDefault(),event.stopPropagation(),e(this).parent().addClass("calendar-error"))}),window.innerWidth>=769&&e("#ui-datepicker-div tbody td").on("mouseenter",function(){if(!e(this).hasClass("ui-datepicker-other-month")){var t=a.datepicker("getDate"),n=s.datepicker("getDate");if(t&&!n){var o=e("#ui-datepicker-div tbody td").index(this),i=e("#ui-datepicker-div tbody td.check-in-date"),r=i.length?e("#ui-datepicker-div tbody td").index(i):0;e("#ui-datepicker-div tbody td").each(function(t,n){return!!(t<r||e(n).hasClass("check-in-date"))||!(t>=o)&&void e(n).addClass("hover-in-between")})}}}).on("mouseleave",function(){e("#ui-datepicker-div tbody td").removeClass("hover-in-between")})):k=setTimeout(l,10)}function u(){if(window.innerWidth<769&&!e.contains(".filter-option-check-out","#ui-datepicker-div")){e("#ui-datepicker-div").detach().appendTo(".filter-option-check-out")}l()}function p(e){if(e<new Date)return[!1,"",null];var t=a.datepicker("getDate"),n=s.datepicker("getDate"),o="";return t&&e.getTime()===t.getTime()&&(o+=" check-in-date"),n&&e.getTime()===n.getTime()&&(o+=" check-out-date"),t&&n&&e<n&&e>t&&(o+=" in-between"),[!0,o.trim(),null]}function h(e,t){r.hideCalendarError();var n,o=new Date,i=a.datepicker("getDate");return e<=o?(r.showCalendarError("Sorry, the date you selected is not available."),n=!1):e<=i?(r.showCalendarError("Sorry, select a date after your check in date."),n=!1):n=!0,n}function m(){var i=a.datepicker("getDate"),r=s.datepicker("getDate"),l=e.datepicker.formatDate(n,r).toUpperCase(),u=e.datepicker.formatDate(o,r).toUpperCase();if(d.text(u),t.set("nret[end_date]",l),s.datepicker("option","defaultDate",i),i&&r){var p=Math.abs(r.getTime()-i.getTime()),h=Math.round(p/864e5);t.set("nret[nights]",h)}c.addClass("show")}function f(){a.blur(),s.datepicker("setDate",null).datepicker("hide").blur(),d.text("Select Date")}function g(){s.datepicker("refresh"),u()}var v=this;v.clear=f,v.refresh=g,function(){s.datepicker({dateFormat:s.data("dateFormat"),minDate:0,numberOfMonths:i,beforeShow:u,beforeShowDay:p,onSelect:m})}();var k};nret.destinationDetail={setCookiesAmenities:function(){e("input[data-more-filter-amenities]:checked").each(function(n,o){t.set("retreat_list[amenities]["+n+"]",e(o).attr("data-more-filter-amenities"))}),e("input[data-more-filter-amenities]").not(":checked").each(function(n,o){var i=e(this).attr("data-more-filter-amenities");e.each(document.cookie.split(/; */),function(){var e=this.split("=");if(e[1]==i){var n=decodeURIComponent(e[0]);t.remove(n)}})})},setCookiesArea:function(){e("input[data-more-filter-area]:checked").each(function(n,o){t.set("retreat_list[subarea]["+n+"]",e(o).attr("data-more-filter-area"))}),e("input[data-more-filter-area]").not(":checked").each(function(n,o){var i=e(this).attr("data-more-filter-area");e.each(document.cookie.split(/; */),function(){var e=this.split("=");if(e[0].indexOf("subarea")!==-1&&e[1]==i){var n=decodeURIComponent(e[0]);t.remove(n)}})})},setCookiesBathroom:function(){e('[name="filter-bathroom-choice"]').each(function(){if(e(this).is(":checked")){var n=e(this).val();t.set("retreat_list[bathrooms]",n)}})},setCookiesGuest:function(){e('[name="filter-guest-choice"]').each(function(){if(e(this).is(":checked")){var n=e(this).val();t.set("nret[guests]",n)}})},setCookiesBed:function(){e('[name="filter-bed-choice"]').each(function(){if(e(this).is(":checked")){var n=e(this).val();t.set("retreat_list[beds]",n)}})},setCookiesBedrooms:function(){e("a[data-more-filter-bedrooms]").on("click",function(){var n=e(this).attr("data-more-filter-bedrooms"),o=" Bedrooms";"1"===e(this).html()&&(o=" Bedroom"),e(".bedroom-label").html(e(this).html()+o),t.set("retreat_list[bedrooms]",n)})},refreshPage:function(){e("#destinationFilterRefresh, #destinationMoreFilterRefresh").on("click",function(){nret.destinationDetail.setCookiesGuest(),nret.destinationDetail.setCookiesBed(),nret.destinationDetail.setCookiesBathroom(),nret.destinationDetail.setCookiesArea(),nret.destinationDetail.setCookiesAmenities(),history.pushState("",document.title,window.location.pathname),window.location.href=window.location.href+"#filtered",window.location.reload()})},clearFilters:function(){e("#destinationFilterClear, .destinationFilterClear").on("click",function(){nret.destinationDetail.clearTheFilters()})},clearTheFilters:function(n){n&&n.preventDefault(),t.remove("nret[start_date]"),t.remove("nret[end_date]"),t.remove("nret[nights]"),t.remove("nret[guests]"),t.remove("retreat_list[bedrooms]"),t.remove("retreat_list[beds]"),t.remove("retreat_list[bathrooms]"),e("input[data-more-filter-amenities]").each(function(e,n){t.remove("retreat_list[amenities]["+e+"]")}),e("input[data-more-filter-area]").each(function(e,n){t.remove("retreat_list[subarea]["+e+"]")}),window.location.reload()},listen:function(){e(".filter-choice-one").on("click",function(){var t=e(this);e(this).toggleClass("filter-selected"),e(this).parents("ul").hasClass("single-choice-list")&&e(this).parents("ul").find(".filter-selected").not(t).removeClass("filter-selected")}),e("#moreFiltersWrapper .filter-choice-one").on("click",nret.destinationDetail.updateMoreFiltersCount),e("#moreFiltersWrapper input").on("change",nret.destinationDetail.updateMoreFiltersCount),e(".retreat-listing__list-bg .empty .reset").on("click",nret.destinationDetail.clearTheFilters)},updateMoreFiltersCount:function(){var t=e("#moreFiltersWrapper input:checked").length;t>0?e("#more-label").html("More Filters ("+t+")"):e("#more-label").html("More Filters")},deleteForeignCookies:function(){e.each(document.cookie.split(/; */),function(){var e=this.split("=");["destination","journal_list"].forEach(function(n){e[0].indexOf(n)!==-1&&t.remove(decodeURIComponent(e[0]))})})},readBedroomsCookie:function(){var n,o=e("#bedroom-label"),i=t.get("retreat_list[bedrooms]");i&&(n=parseInt(i),1===n?o.html("1 bedroom"):o.html(n+" bedrooms"))},readGuestsCookie:function(){var n=t.get("nret[guests]");n&&e("[data-more-filter-guest="+n+"]").prop("checked",!0)},readBedsCookie:function(){var n=t.get("retreat_list[beds]");n&&e("[data-more-filter-bed="+n+"]").prop("checked",!0)},readBathroomsCookie:function(){var n=t.get("retreat_list[bathrooms]");n&&e("[data-more-filter-bathroom="+n+"]").prop("checked",!0)},readAmenityCookies:function(){e("[data-more-filter-amenities]").each(function(n){var o=t.get("retreat_list[amenities]["+n+"]");o&&e("[data-more-filter-amenities="+o+"]").prop("checked",!0)})},readAreaCookies:function(){e("[data-more-filter-area]").each(function(n){var o=t.get("retreat_list[subarea]["+n+"]");o&&e("[data-more-filter-area="+o+"]").prop("checked",!0)})},scrollToListing:function(){"#listing"!==window.location.hash&&"#filtered"!==window.location.hash||e(window).on("load",function(){e(".retreat-listing__list").velocity("scroll",{duration:600,offset:-180,easing:"ease-in-out"})})},showMoreRetreatsEvent:function(){var t=e(".retreat-listing__block-small.retreat-listing__show-next"),n=e(".retreat-listing__block-small.retreat-listing__show-all");e("#showMoreRetreats").on("click",function(){e(this).hasClass("retreat-listing__view-more")?e(this).hasClass("retreat-listing__view-last")?(e(this).remove(),t.removeClass("retreat-listing__show-next reveal-block"),nret.helpers.revealHidden()):(e(this).removeClass("retreat-listing__view-more").addClass("retreat-listing__view-all").text("View All"),t.removeClass("retreat-listing__show-next reveal-block"),nret.helpers.revealHidden()):e(this).hasClass("retreat-listing__view-all")&&(n.removeClass("retreat-listing__show-all reveal-block"),nret.helpers.revealHidden(),e(this).remove())})},readCookies:function(){nret.destinationDetail.readGuestsCookie(),nret.destinationDetail.readBedroomsCookie(),nret.destinationDetail.readBedsCookie(),nret.destinationDetail.readBathroomsCookie(),nret.destinationDetail.readAmenityCookies(),nret.destinationDetail.readAreaCookies(),nret.destinationDetail.updateMoreFiltersCount()},checkScroll:function(){var t=e("section[data-scrolltop]"),n=e(".retreat-listing__block-small"),o=e(".filter-block__wrapper").offset().top;if(t.length){t=t.data("scrolltop"),n.length&&(o=e(n[t]).offset().top);var i=o-(e(".subnav-container").height()+e(".global-nav").height());e("body,html").animate({scrollTop:i},2200)}},addStringToReviewCount:function(){e(".bv-rating-label").length>0&&e(".bv-rating-label").each(function(){var t=e(this).text();e(this).text(t+" Reviews")})},emptyCheck:function(){e(".retreat-listing__list .wrapper .retreat-listing__block-small").length?(e(".retreat-listing__list .retreat-listing__list-bg").attr("style",""),e(".retreat-listing__list .retreat-listing__list-bg .empty").hide()):(e(".retreat-listing__list .retreat-listing__list-bg").show(),e(".retreat-listing__list .retreat-listing__list-bg .empty").show())},removeDuplicateMblMenu:function(){e("body").children("#mbl-search").remove()},showCalendarsInFilterBlock:function(){e(".filter-option-check-in").on("click",function(){e(".filter__cal-wrapper-out").removeClass("show"),e(".filter__cal-wrapper-in").addClass("show")}),e(".filter-option-check-out").on("click",function(){e(".filter__cal-wrapper-in").removeClass("show"),e(".filter__cal-wrapper-out").addClass("show")})},addNoMapClass:function(){0===e(".content-grid__offer-row").length&&e(".content-listing__map").addClass("no-map")},init:function(){e("div.lazy").lazyload({effect:"fadeIn"}),nret.destinationDetail.deleteForeignCookies(),nret.destinationDetail.readCookies(),nret.destinationDetail.listen(),nret.destinationDetail.refreshPage(),nret.destinationDetail.showCalendarsInFilterBlock(),nret.destinationDetail.clearFilters(),nret.destinationDetail.setCookiesBedrooms(),nret.destinationDetail.checkScroll(),nret.destinationDetail.showMoreRetreatsEvent(),nret.destinationDetail.removeDuplicateMblMenu(),nret.destinationDetail.addNoMapClass(),window.setTimeout(nret.destinationDetail.addStringToReviewCount,3e3),nret.destinationDetail.scrollToListing(),nret.destinationDetail.emptyCheck(),new h}}}(jQuery,Cookies);var nret=nret||{};!function(e,t){nret.destinationListing={setResultsNum:function(){var t=e(".destination-listing__block").not(".hide").length;e("#filterResultsCount").text(t)},clearListener:function(){e(".filter__clear").on("click",function(){e(".filter-selected").removeClass("filter-selected"),nret.filters.filterElements(),nret.destinationListing.setResultsNum(),nret.destinationListing.els.guestLabel.html("No. of Guests"),e(".region-list .filter-choice-init").each(function(e,n){t.remove("destination[region]["+e+"]")}),t.remove("nret[guests]"),nret.destinationListing.els.regionLabel.html("Region")})},regionListener:function(){e(".region-list .filter-choice-init").on("click",function(){var n,o=e(this),i=o.parent().parent();o.toggleClass("filter-selected"),n=i.find(".filter-selected").length,n>1?nret.destinationListing.els.regionLabel.html("Region ("+n+")"):nret.destinationListing.els.regionLabel.html("Region"),e(".region-list .filter-choice-init").each(function(e,n){t.remove("destination[region]["+e+"]")}),e(".region-list .filter-choice-init.filter-selected").each(function(n,o){t.set("destination[region]["+n+"]",e(o).attr("data-filter-choice"))})})},guestListener:function(){e(".guest-list .filter-choice-init").on("click",function(){var n=e(this),o=n.attr("data-filter-choice").replace("sleeps-","");nret.destinationListing.els.guestLabel.html(n.html()),n.toggleClass("filter-selected"),e(".guest-list").find(".filter-selected").not(n).removeClass("filter-selected"),t.set("nret[guests]",o)})},deleteForeignCookies:function(){e.each(document.cookie.split(/; */),function(){var e=this.split("=");["retreat_list","journal_list"].forEach(function(n){e[0].indexOf(n)!==-1&&t.remove(decodeURIComponent(e[0]))})})},readRegionCookies:function(){var n,o=e(".region-list .filter-choice-init");o.each(function(n){var o=t.get("destination[region]["+n+"]");o&&e(".region-list .filter-choice-init[data-filter-choice="+o+"]").addClass("filter-selected")}),n=e(".region-list .filter-choice-init.filter-selected").length,n>1?nret.destinationListing.els.regionLabel.html("Region ("+n+")"):nret.destinationListing.els.regionLabel.html("Region")},readGuestsCookie:function(){var n,o=t.get("nret[guests]");o&&(e(".guest-list .filter-choice-init[data-filter-choice=sleeps-"+o+"]").addClass("filter-selected"),n=parseInt(o),1===n?nret.destinationListing.els.guestLabel.html("1 guest"):nret.destinationListing.els.guestLabel.html(n+" guests"))},toggleListMap:function(){e(".destination-listing__toggle-btn").on("click",function(){"destinationListingListToggle"===e(this).attr("id")?nret.destinationListing.toggleShowList():"destinationListingMapToggle"===e(this).attr("id")&&nret.destinationListing.toggleShowMap()})},toggleShowMap:function(){e("#destinationListingListToggle").removeClass("btn__blue").addClass("btn__transparent"),e("#destinationListingMapToggle").removeClass("btn__transparent").addClass("btn__blue"),e(".destination-listing__row").velocity({opacity:0},{display:"none"}),e(".destination-listing__map").velocity("transition.slideUpIn")},toggleShowList:function(){e("#destinationListingMapToggle").removeClass("btn__blue").addClass("btn__transparent"),e("#destinationListingListToggle").removeClass("btn__transparent").addClass("btn__blue"),e(".destination-listing__map").velocity({opacity:0},{display:"none"},{duration:"100"}),e(".destination-listing__row").delay(200).velocity("transition.slideUpIn")},closeMapCard:function(){e(".map-card__close").on("click",function(){e(this).parents(".map-card__container").removeClass("show")})},init:function(){nret.destinationListing.els={guestLabel:e("#guests-label"),regionLabel:e("#region-label")},nret.destinationListing.deleteForeignCookies(),nret.destinationListing.readRegionCookies(),nret.destinationListing.readGuestsCookie(),nret.destinationListing.setResultsNum(),nret.destinationListing.clearListener(),nret.destinationListing.regionListener(),nret.destinationListing.guestListener(),nret.destinationListing.toggleListMap(),nret.destinationListing.closeMapCard()}}}(jQuery,Cookies);var nret=nret||{};!function(e,t){var n,o,i="M dd",a="dd-M-yy",r=window.innerWidth<769?1:2;e("#home").length>0||e("#retreat-search").length>0?(n=e("#bookingCheckIn"),o=e("#bookingCheckOut"),e(".destination-check-in-nav").prop("disabled",!0)):(n=e("#bookingCheckInNav"),o=e("#bookingCheckOutNav"));var s=function(){function e(){i(),a()}function i(){r.checkInDatepicker.clear(),t.remove("nret[start_date]")}function a(){r.checkOutDatepicker.clear(),t.remove("nret[end_date]")}var r=this;r.checkInDatepicker=void 0,r.checkOutDatepicker=void 0,r.clear=e,r.clearCheckInDatepicker=i,r.clearCheckOutDatepicker=a,function(){r.checkInDatepicker=new l(r),r.checkOutDatepicker=new c(r);var e=t.get("nret[start_date]"),i=t.get("nret[end_date]");if(e&&i){var a=e.toLowerCase().split("-"),s=i.toLowerCase().split("-"),d=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],u=d.indexOf(a[1]),p=d.indexOf(s[1]),h=new Date(a[2],u,a[0]),m=new Date(s[2],p,s[0]);n.datepicker("setDate",h),o.is(":disabled")&&o.prop("disabled",!1);var f=n.datepicker("getDate");o.datepicker("option","defaultDate",f),o.datepicker("setDate",m)}}()},l=function(s){function l(){clearTimeout(f),e("#ui-datepicker-div .ui-datepicker-calendar").is(":visible")?(e(".ui-datepicker-prev:not(.ui-state-disabled), .ui-datepicker-next:not(.ui-state-disabled)").click(function(){c()}),e(".clear-dates button, button.clear-dates").on("click",function(){s.clear()})):f=setTimeout(l,10)}function c(){if(!e.contains(".home__search__check-in-wrapper","#ui-datepicker-div")){e("#ui-datepicker-div").detach().appendTo(".home__search__check-in-wrapper")}l()}function d(e){if(e<=new Date)return[!1,"",null];var t=n.datepicker("getDate"),i=o.datepicker("getDate"),a="";return t&&e.getTime()===t.getTime()&&(a+=" check-in-date"),i&&e.getTime()===i.getTime()&&(a+=" check-out-date"),t&&i&&e<i&&e>t&&(a+=" in-between"),[!0,a.trim(),null]}function u(){var r=n.datepicker("getDate"),s=(o.datepicker("getDate"),e.datepicker.formatDate(a,r).toUpperCase()),l=e.datepicker.formatDate(i,r).toUpperCase();nret.home.els.checkInLabel.text(l.toLowerCase()),nret.home.els.checkInSubLabel.addClass("show"),t.set("nret[start_date]",s),o.is(":disabled")&&o.prop("disabled",!1),o.datepicker("setDate",r),nret.header.els.retreatSearch.hasClass("show")?e(".initHomeDropdown.check-out").eq(0).trigger("click"):e(".initHomeDropdown.check-out").eq(1).trigger("click"),e("#retreat-search").length&&e(".checkout-label").trigger("click"),setTimeout(function(){o.datepicker("show")},250),nret.home.closeCheckInOpenCheckOut()}function p(){n.datepicker("setDate",null).datepicker("hide").blur(),o.prop("disabled",!0).blur(),nret.home.els.checkInLabel.text("Check In")}function h(){n.datepicker("refresh"),c()}var m=this;m.clear=p,m.refresh=h,function(){n.datepicker({dateFormat:n.data("dateFormat"),minDate:0,numberOfMonths:r,beforeShow:c,beforeShowDay:d,onSelect:u})}();var f},c=function(s){function l(){clearTimeout(f),e("#ui-datepicker-div .ui-datepicker-calendar").is(":visible")?(e(".ui-datepicker-prev:not(.ui-state-disabled), .ui-datepicker-next:not(.ui-state-disabled)").click(function(){c()}),e(".clear-dates button, button.clear-dates").on("click",function(){s.clear()}),window.innerWidth>=769&&e("#ui-datepicker-div tbody td").on("mouseenter",function(){if(!e(this).hasClass("ui-datepicker-other-month")){var t=n.datepicker("getDate"),i=o.datepicker("getDate");if(t&&!i){var a=e("#ui-datepicker-div tbody td").index(this),r=e("#ui-datepicker-div tbody td.check-in-date"),s=r.length?e("#ui-datepicker-div tbody td").index(r):0;e("#ui-datepicker-div tbody td").each(function(t,n){return!!(t<s||e(n).hasClass("check-in-date"))||!(t>=a)&&void e(n).addClass("hover-in-between")})}}}).on("mouseleave",function(){e("#ui-datepicker-div tbody td").removeClass("hover-in-between")})):f=setTimeout(l,10)}function c(t){if(!e.contains(".home__search__check-out-wrapper","#ui-datepicker-div")){e("#ui-datepicker-div").detach().appendTo(".home__search__check-out-wrapper")}l()}function d(e){if(e<new Date)return[!1,"",null];var t=n.datepicker("getDate"),i=o.datepicker("getDate"),a="";return t&&e.getTime()===t.getTime()&&(a+=" check-in-date"),i&&e.getTime()===i.getTime()&&(a+=" check-out-date"),t&&i&&e<i&&e>t&&(a+=" in-between"),[!0,a.trim(),null]}function u(){var r=n.datepicker("getDate"),s=o.datepicker("getDate"),l=e.datepicker.formatDate(a,s).toUpperCase(),c=e.datepicker.formatDate(i,s).toUpperCase();if(nret.home.els.checkOutLabel.text(c.toLowerCase()),nret.home.els.checkOutSubLabel.addClass("show"),t.set("nret[end_date]",l),o.datepicker("option","defaultDate",r),r&&s){var d=Math.abs(s.getTime()-r.getTime()),u=Math.round(d/864e5);t.set("nret[nights]",u)}e(".home__search__check-out-wrapper").removeClass("show-now show open")}function p(){n.blur(),o.datepicker("setDate",null).datepicker("hide").blur(),nret.home.els.checkOutLabel.text("Check Out")}function h(){o.datepicker("refresh"),c()}
var m=this;m.clear=p,m.refresh=h,function(){o.datepicker({dateFormat:o.data("dateFormat"),minDate:0,numberOfMonths:r,beforeShow:c,beforeShowDay:d,onSelect:u})}();var f};nret.home={addBodyClass:function(){e("#home").length>0&&e("body").addClass("home-page")},closeNavBanner:function(){e(".global-nav__banner").velocity({opacity:0},500,function(){e(this).remove()}),e(".global-nav").velocity({top:0},200),e(".explorer__help-modal").velocity({top:120},{delay:200,duration:180})},closeNavBannerEvent:function(){e("#navBannerClose").on("click",function(){nret.home.closeNavBanner()}),window.setTimeout(nret.home.closeNavBanner,1e4)},openExploreChoiceList:function(e){var t=e.find(".home__choices__list-wrapper");e.hasClass("open")&&t.velocity({opacity:1},{display:"block"})},closeExplorerChoiceList:function(){e(".home__choices__list-wrapper").velocity({opacity:0},{display:"none"})},openExploreChoiceListEvent:function(){e(".dropdown").find(".inner").on("click",function(){var t=e(this);t.hasClass("open")?t.removeClass("open"):(e(".dropdown").find(".inner").not(t).removeClass("open"),t.addClass("open")),nret.home.closeExplorerChoiceList(),nret.home.openExploreChoiceList(t)})},initHomeSearchByDateEvent:function(){e("#dateSearch").on("click",function(){e(this).addClass("active"),e("#exploreSearch").removeClass("active"),nret.home.openHomeSearchByDate()})},initHomeExploreEvent:function(){e("#exploreSearch").on("click",function(){window.location.href="/destination",e(this).addClass("active"),e("#dateSearch").removeClass("active")})},openHomeSearchByDate:function(){nret.home.els.homeSearchDropdownTitle.addClass("show"),nret.home.els.choicesSearchDropdownWrapper.addClass("show"),e(".choices-explore, .home__choices__list-wrapper").removeClass("show")},openHomeExplore:function(){nret.home.els.homeSearchDropdownTitle.removeClass("show"),nret.home.els.choicesSearchDropdownWrapper.removeClass("show"),e(".choices-explore").addClass("show"),e(".home__search__dropdown").removeClass("show")},openSearchByDateDropdown:function(){var t=e(".initHomeDropdown");t.on("click",function(){var n=e(this).find(".home__search__choice");if(t.attr("data-home-search")){var o=e(this).attr("data-home-search"),i=e(this).parents(".home__retreat-search").find('.home__search__dropdown[data-home-search="'+o+'"]');i.toggleClass("show open"),e(".home__search__dropdown").not(i).removeClass("show open")}e(".home__search__choice").not(n).removeClass("active"),n.addClass("active")})},changeStartBtnColorOnSelection:function(){var t=e(".home__search__choice");"Destination"!==t.eq(0).text()&&"Check-In"!==t.eq(1).text()&&"Check-Out"!==t.eq(2).text()&&"Guests"!==t.eq(3).text()&&e("#initHomeSearch").addClass("btn__blue").removeClass("btn__transparent")},closeCheckInOpenCheckOut:function(){e("body").hasClass("home-page")&&(e(".home__search__check-in-wrapper").removeClass("show"),e(".home__search__check-out-wrapper").addClass("show-now open")),e(".filter__filter-option__calendar").length&&(e(".filter-option__calendar-check-in").removeClass("show"),e(".filter-option__calendar-check-out").addClass("show"),e(".filter__options-wrapper__filter-option.filter-option-check-in").removeClass("open"),e(".filter__options-wrapper__filter-option.filter-option-check-out").addClass("open"))},selectLocationValueEvent:function(){e(".home__search__dropdown-location-block").find("a").on("click",function(){var t=e(this);nret.home.selectLocationValue(t)})},selectLocationValue:function(e){var t=e.text();nret.home.els.homeSearchDropdownTitle.find('.title[data-home-search="location"]').html(t+'<span class="icon icon_carrot-down"></span>')},saveDataFromClicksOnHomeSearch:function(){e("a[data-home-bedrooms]").on("click",function(n){var o=e(this).attr("data-home-bedrooms"),i=" Bedrooms";"1"===o&&(i=" Bedroom"),e(this).addClass("filter-selected"),e("a[data-home-bedrooms]").not(e(this)).removeClass("filter-selected"),e(".bedrooms.home__search__choice").html(e(this).html()+i),e('ul[data-home-search="bedrooms"]').removeClass("show"),t.set("retreat_list[bedrooms]",o),nret.home.changeStartBtnColorOnSelection(),n.stopPropagation()}),e("a[data-home-experience]").on("click",function(){var n=e(this).attr("data-home-experience");t.set("destination_experience",n),nret.home.changeStartBtnColorOnSelection()}),e("a[data-home-environment]").on("click",function(){var n=e(this).attr("data-home-environment");t.set("destination_environment",n),nret.home.changeStartBtnColorOnSelection()})},initLocationTabs:function(){e(".region-titles .title").on("click",function(){var t=e(this),n=t.index();e(".region-titles .current.title").removeClass("current"),e(".destination-groups .current.group").removeClass("current"),t.addClass("current"),e(".destination-groups").find(".group").eq(n).addClass("current")})},homepageVideoController:function(){if(e(".video__bg").length){var t,n=e(".video__bg"),o=n.data("videourl"),i=(e(".video-toggle").find("p"),0);return{init:function(){var e=this.createVideoContainer();n.append(e)},changeHomepageVideo:function(e){(i=e||i+1)>o.length-1&&(i=0);var t=this.createVideoContainer();n.prepend(t)},createVideoContainer:function(){var n='<video poster="" preload="auto" id="homeBgVid" muted>';return n+='<source class="mp4" src="'+o[i]+'" type="video/mp4">',n+="</video>",n=e(n),n.on("canplay",function(){this.play()}),n.on("ended",function(){this.changeHomepageVideo()}.bind(this)),t?t.animate({opacity:0},800,function(){t.remove(),t=n}):t=n,n}}}},deleteForeignCookies:function(){e.each(document.cookie.split(/; */),function(){var e=this.split("=");["destination","retreat_list","journal_list"].forEach(function(n){e[0].indexOf(n)!==-1&&t.remove(decodeURIComponent(e[0]))})})},readCookies:function(){var n=t.get("nret[start_date]"),o=moment(n,"DD-MMM-YYYY").format("MMM Do"),i=t.get("nret[end_date]"),a=moment(i,"DD-MMM-YYYY").format("MMM Do"),r=t.get("nret[location_id]"),s=t.get("retreat_list[bedrooms]");if(n&&(console.log(),nret.home.els.checkInLabel.text(o),nret.home.els.checkInSubLabel.addClass("show")),i&&(nret.home.els.checkOutLabel.text(a),nret.home.els.checkOutSubLabel.addClass("show")),r){r=r.split(",");var l=r.length,c=" Destinations";1===r&&(c=" Destination"),e(".destination.home__search__choice").text(l+c),e(".global-nav__destination-list").find("input").each(function(){var t=e(this);e(r).each(function(e,n){t.attr("data-home-location")===n&&t.prop("checked",!0)})})}if(s){var d=" Bedrooms";"1"===s&&(d=" Bedroom"),"0"!==s?e(".bedrooms.home__search__choice, #bedroom-label").text(s+d):e(".bedrooms.home__search__choice, #bedroom-label").text("Select Destination")}},scrollToBookingWidget:function(){e(".scroll-once").on("click","h3",function(){e(".home__retreat-search-container").hasClass("scroll-once")&&e(".scroll-to-search").velocity("scroll",{duration:600,offset:-330,easing:"ease-in-out"}),e(".home__retreat-search-container").removeClass("scroll-once")})},init:function(){nret.home.els={checkInLabel:e(".checkin-label"),checkInSubLabel:e(".checkin-sublabel"),checkOutLabel:e(".checkout-label"),checkOutSubLabel:e(".checkout-sublabel"),homeSearchDropdownTitle:e(".home__search__dropdown-title"),choicesSearchDropdownWrapper:e(".choices-search__dropdown-wrapper")},nret.home.initHomeSearchByDateEvent(),nret.home.closeNavBannerEvent(),nret.home.saveDataFromClicksOnHomeSearch(),nret.home.addBodyClass(),nret.home.initHomeExploreEvent(),nret.home.selectLocationValueEvent(),nret.home.openSearchByDateDropdown(),nret.home.initLocationTabs(),nret.home.readCookies(),nret.home.scrollToBookingWidget(),new s;var t=new this.homepageVideoController;e(".video__bg").length&&t.init()}},jQuery(document).ready(function(){nret.home.init()})}(jQuery,Cookies);var nret=nret||{};!function(e){nret.journal={setFeaturedArticleToTop:function(){var t=e(".journal-listing__featured-article").eq(0);e("#journalArticleContainer").prepend(t)},setJournalCookeis:function(){e("a[data-journal-type]").on("click",function(){var t=e(this).attr("data-journal-type");Cookies.set("journal_list[type]",t),e("a[data-journal-type]").removeClass("filter-selected"),e(this).toggleClass("filter-selected")}),e("a[data-journal-location]").on("click",function(){var t=e(this).attr("data-journal-location");Cookies.set("journal_list[location]",t),e("a[data-journal-location]").removeClass("filter-selected"),e(this).toggleClass("filter-selected")}),e("a[data-journal-environment]").on("click",function(){var t=e(this).attr("data-journal-environment");Cookies.set("journal_list[environment]",t),e("a[data-journal-environment]").removeClass("filter-selected"),e(this).toggleClass("filter-selected")}),e("a[data-journal-experience]").on("click",function(){var t=e(this).attr("data-journal-experience");Cookies.set("journal_list[experience]",t),e("a[data-journal-experience]").removeClass("filter-selected"),e(this).toggleClass("filter-selected")})},removeJournalCookies:function(){e(".filter__clear").on("click",function(){Cookies.remove("journal_list[type]"),Cookies.remove("journal_list[location]"),Cookies.remove("journal_list[environment]"),Cookies.remove("journal_list[experience]"),window.location.reload()})},deleteForeignCookies:function(){e.each(document.cookie.split(/; */),function(){var e=this.split("=");["destination","retreat_list"].forEach(function(t){e[0].indexOf(t)!==-1&&Cookies.remove(decodeURIComponent(e[0]))})})},loadMoreJournalArticles:function(){var t,n=1,o=!1,i=e("#journalLoader");e(window).scroll(function(){e(window).scrollTop()+e(window).height()>e(document).height()-800&&0==o&&(o=!0,i.fadeIn(),e.ajax({url:Drupal.settings.basePath+"views/ajax",type:"post",data:{view_name:"journal_list",view_display_id:"page",page:n},dataType:"json",success:function(a){if(void 0!==a[1]){var r=a[1].data;t=e("<div></div>"),t.html(r);var s=e(".news-block, .journal-listing__featured-article",t),l=e("#journalArticleContainer");i.fadeOut(),l.append(s),Drupal.attachBehaviors(),n++,t=void 0,o=!1,s.length<8&&(o=!0)}}}))})},init:function(){nret.journal.setFeaturedArticleToTop(),nret.journal.deleteForeignCookies(),nret.journal.setJournalCookeis(),nret.journal.removeJournalCookies(),nret.journal.loadMoreJournalArticles()}}}(jQuery);var nret=nret||{};!function(e){nret.offer={setofferCookeis:function(){e("a[data-offer-type]").on("click",function(){var t=e(this).attr("data-offer-type");Cookies.set("offer_list[type]",t)}),e("a[data-offer-location]").on("click",function(){var t=e(this).attr("data-offer-location");Cookies.set("offer_list[location]",t)})},removeofferCookies:function(){e(".filter__clear").on("click",function(){Cookies.remove("offer_list")})},adjustFilterTextOnLoad:function(){Cookies.get("offer_list[location]"),Cookies.get("offer_list[type]"),Cookies.get("offer_list[environment]"),Cookies.get("offer_list[location]")},init:function(){nret.offer.setofferCookeis(),nret.offer.removeofferCookies()}},jQuery(document).ready(function(){e("body").hasClass("page-offers")&&nret.offer.init()})}(jQuery);var nret=nret||{};!function(e){nret.page_promotion={triggerClickOnSelect:function(){e(".select__wrapper").on("click",function(){e(this).find("select").trigger("click")})},changeDropdownValue:function(){e(".select__wrapper").find("select").on("change",function(){val=e(this).val(),e(this).parent(".select__wrapper").find(".select-text").text(val)})},validateFormFields:function(){var t=!0,n=e(".validate-email").val(),o=[];nret.helpers.validateEmail(n)===!1&&(t=!1,e(".validate-email").addClass("error")),e(".validate-text").each(function(){""===e(this).val()&&(t=!1,e(this).addClass("error"))}),e(".validate-select").each(function(){null===e(this).val()&&(t=!1,e(this).parent().addClass("error"))}),e("#toc").is(":checked")||(t=!1,e(".toc-error").addClass("error")),t===!0&&(e('input:checked[name="Answer2[]"]').each(function(){o.push(e(this).val()),e(this).attr("disabled",!0)}),e("#answer2_array").val(o.join(";")),nret.page_promotion.sendFormToNRES())},sendFormToNRESEvent:function(){e("#airbnbCompFormSubmit").on("click",function(e){nret.page_promotion.validateFormFields()})},sendFormToNRES:function(){var t=e("form#airbnbCompForm"),n=t.serialize();e.ajax({url:"/api/v1/newsletter",type:"POST",data:n,dataType:"json",success:function(t){e(".success-remove").fadeOut(function(){e(this).remove(),e(".promo__form-wrapper").find(".container").addClass("success"),e(".copy__thank-you").fadeIn(),e(".promotion").addClass("success"),e(".promo__form-wrapper").addClass("success"),e(".legal").remove()})}})},openTCModal:function(){e(".initToc").on("click",function(){nret.page_promotion.els.promotionTerms.addClass("show")})},closeTCModal:function(){nret.page_promotion.els.promotionTerms.on("click",function(e){e.target===this&&nret.page_promotion.els.promotionTerms.removeClass("show")})},init:function(){nret.page_promotion.els={promotionTerms:e(".promotion__terms-service")},nret.page_promotion.sendFormToNRESEvent(),nret.page_promotion.changeDropdownValue(),nret.page_promotion.openTCModal(),nret.page_promotion.closeTCModal()}}}(jQuery);var nret=nret||{};!function(e){nret.realEstateCaseStudy={init:function(){}}}(jQuery);var nret=nret||{};!function(e){function t(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n}nret.realEstateCommunity={addListeners:function(){e(".real-estate-community-listings .sort-by-container > select").on("change",nret.realEstateCommunity.communitySort)},setActiveCommunityMapLocation:function(n){e(".community-map-locations-item").removeClass("active"),e(".community-map-locations-item").eq(n).addClass("active");for(var o=0;o<nret.realEstateCommunity.communityMapMarkers.length;o++){var i=o===n?"http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld="+t(o+1,2)+"|2A2C33|FFFFFF":"http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld="+t(o+1,2)+"|FFFFFF|000000";nret.realEstateCommunity.communityMapMarkers[o].setIcon(i),nret.realEstateCommunity.communityMapMarkers[o].setZIndex(google.maps.Marker.MAX_ZINDEX+1)}},communityMap:function(){var n=e("#community-map");if(n.length){var o=e(".community-map-locations-item"),i=new google.maps.Map(n[0],{center:{lat:parseFloat(o.eq(0).data("latitude")),lng:parseFloat(o.eq(0).data("longitude"))},fullscreenControl:!1,mapTypeControl:!1,mapTypeId:"hybrid",rotateControl:!1,scaleControl:!0,streetViewControl:!1,scrollwheel:!1,zoom:8,zoomControl:!0});e(".community-map-locations-item button").click(function(){var t=e(this).closest(".community-map-locations-item").index(),n=nret.realEstateCommunity.communityMapMarkers[t];i.setCenter(n.getPosition()),n.setZIndex(google.maps.Marker.MAX_ZINDEX+1),nret.realEstateCommunity.setActiveCommunityMapLocation(t)});for(var a=0;a<o.length;a++)!function(e){var n=0===e?"http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld="+t(e+1,2)+"|2A2C33|FFFFFF":"http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld="+t(e+1,2)+"|FFFFFF|000000",a=new google.maps.Marker({icon:n,position:{lat:parseFloat(o.eq(e).data("latitude")),lng:parseFloat(o.eq(e).data("longitude"))},map:i});a.addListener("click",function(){i.setZoom(8),i.setCenter(a.getPosition()),a.setZIndex(google.maps.Marker.MAX_ZINDEX+1),nret.realEstateCommunity.setActiveCommunityMapLocation(e)}),nret.realEstateCommunity.communityMapMarkers.push(a)}(a);for(var r=new google.maps.LatLngBounds,a=0;a<nret.realEstateCommunity.communityMapMarkers.length;a++)r.extend(nret.realEstateCommunity.communityMapMarkers[a].getPosition());i.fitBounds(r),nret.realEstateCommunity.setActiveCommunityMapLocation(0)}},communityMapMarkers:[],communitySort:function(t){var n=e(".real-estate-community-listings__teasers"),o=e(".real-estate-community-listings .sort-by-container > select"),i=e("article.real-estate-property-teaser");[].sort.call(i,function(t,n){var i=parseInt(+e(t).attr("data-bedrooms").replace(/\D/g,"")),a=parseInt(+e(n).attr("data-bedrooms").replace(/\D/g,"")),r=parseInt(+e(t).attr("data-price").replace(/\D/g,"")),s=parseInt(+e(n).attr("data-price").replace(/\D/g,""));switch(o.val()){case"1":return i-a;case"2":return a-i;case"3":return r-s;case"4":return s-r}}),i.each(function(){n.append(this)})},init:function(){nret.realEstateCommunity.addListeners(),nret.realEstateCommunity.communitySort(),nret.realEstateCommunity.communityMap()}}}(jQuery);var nret=nret||{};!function(e){nret.realEstateContact={init:function(){}}}(jQuery);var nret=nret||{};!function(e){var t=function(t){function n(e){u=e.touches[0].clientX,p=e.touches[0].clientY}function o(e){if(u&&p){var t=e.touches[0].clientX,n=e.touches[0].clientY,o=u-t,i=p-n;Math.abs(o)>Math.abs(i)&&(o>0?l.previous():l.next()),u=null,p=null}}function i(e){return e<0?l.itemLength-1:e>=l.itemLength?0:e}function a(){s(l.activeIndex+1)}function r(){s(l.activeIndex-1)}function s(e){c.removeClass("active"),d.removeClass("active"),l.activeIndex=i(e),c.eq(l.activeIndex).addClass("active"),d.eq(l.activeIndex).addClass("active")}var l=this,c=e(".real-estate-carousel__item",t),d=e(".real-estate-carousel__pagination button",t),u=null,p=null;c.length<=1||(l.activeIndex=e(".real-estate-carousel__item.active",t).index(),l.itemLength=c.length,l.next=a,l.previous=r,l.paginate=s,function(){e(".real-estate-carousel__next",t).on("click",function(){l.next()}),e(".real-estate-carousel__previous",t).on("click",function(){l.previous()}),t.addEventListener("touchstart",n,!1),t.addEventListener("touchmove",o,!1),d.on("click",function(){var t=e(this).index();l.paginate(t)})}())};e(".real-estate-carousel").each(function(e,n){new t(n)})}(jQuery),function(e){$contactForm=e("#real-estate-contact-form"),$contactForm&&(e("input[type=radio][name=real-estate-topic]",$contactForm).on("change",function(){var t="marketing"===this.value?"developing":this.value;e(".real-estate-contact-form__follow-up",$contactForm).hide(),e(".real-estate-contact-form__follow-up--"+t,$contactForm).show()}),$contactForm.submit(function(t){t.preventDefault();var n,o=e(this).serializeArray(),i=e("#real-estate-contact-form button[type=submit]").text();e("#real-estate-contact-form button[type=submit]").text("Sending..."),e.ajax({type:"POST",url:"/api/v1/realstatecontact",data:o,success:function(t){t.error?e("#real-estate-contact-form button[type=submit]").text("Error, Try Again"):e("#real-estate-contact-form button[type=submit]").text("Sent"),window.clearTimeout(n),n=setTimeout(function(){e("#real-estate-contact-form button[type=submit]").text(i)},5e3)}})}))}(jQuery);var nret=nret||{};!function(e){nret.realEstateHomepage={addListeners:function(){e(".real-estate-homepage-nav__menu-item > button").on("click",function(){e(this).closest(".real-estate-homepage-nav__menu-item").siblings().removeClass("active open"),e(this).closest(".real-estate-homepage-nav__menu-item").toggleClass("open").addClass("active")})},init:function(){nret.realEstateHomepage.addListeners()}}}(jQuery);var nret=nret||{};!function(e){nret.realEstatePage={stickySubNav_RealEstate:function(){var t=e(".real-estate-community-nav").length>0,n=null,o=null,i=null,a=function(t){e(".real-estate-header").toggleClass("stuck"),"up"==t?e(".real-estate-community-nav").removeAttr("style"):"down"==t&&(e(".real-estate-community-nav").velocity({top:45},350),e(".real-estate-community-nav").velocity({opacity:1},250))};t&&(n=e(".real-estate-community-nav")[0],o=30,i=function(e){a(e)});new Waypoint.Sticky({element:n,handler:function(e){i(e)},offset:o})},realEstatePageListeners:function(){e(".real-estate-mobile-navigation-open").on("click",function(){e(this).toggleClass("open")}),e(".has-subnavigation > button").on("click",function(){e(this).closest(".has-subnavigation").siblings().removeClass("open"),e(this).closest(".has-subnavigation").toggleClass("open")}),e(".real-estate-submenu-item > button").on("click",function(){e(this).closest(".real-estate-submenu-item").siblings().removeClass("open active"),e(this).closest(".real-estate-submenu-item").toggleClass("open").addClass("active")}),e(".real-estate-footer-menu-item h4 button").on("click",function(){e(this).closest(".real-estate-footer-menu-item").siblings().removeClass("open"),e(this).closest(".real-estate-footer-menu-item").toggleClass("open")}),e(".launch-contact-modal").on("click",function(){e(".real-estate-contact-form-modal").fadeIn()}),e(".close-contact-modal").on("click",function(){e(".real-estate-contact-form-modal").fadeOut()})},init:function(){nret.realEstatePage.realEstatePageListeners(),e(".real-estate-community-nav").length>0&&(e("body").hasClass("node-type-retreat")||e("body").hasClass("desktop")||window.innerWidth>=900)&&nret.realEstatePage.stickySubNav_RealEstate()}},jQuery(document).ready(function(){nret.realEstatePage.init()})}(jQuery);var nret=nret||{};!function(e){nret.realEstateOurDifferences={markers:[],setLocationsMapLocation:function(t){var n=e(".our-differences-map-locations-item");n.removeClass("active"),n.eq(t).addClass("active");for(var o=0;o<nret.realEstateOurDifferences.markers.length;o++)o===t?nret.realEstateOurDifferences.markers[o].setIcon({anchor:new google.maps.Point(31,31),origin:new google.maps.Point(0,0),scaledSize:new google.maps.Size(34,49),size:new google.maps.Size(34,49),url:"https://s3.amazonaws.com/natural-retreats/real-estate/google-maps-marker-active.png"}):nret.realEstateOurDifferences.markers[o].setIcon({anchor:new google.maps.Point(14,14),origin:new google.maps.Point(0,0),scaledSize:new google.maps.Size(18,26),size:new google.maps.Size(18,26),url:"https://s3.amazonaws.com/natural-retreats/real-estate/google-maps-marker.png"})},ourLocationsMap:function(){var t=e("#our-differences-map");if(t.length)for(var n=e(".our-differences-map-locations-item"),o=new google.maps.Map(t[0],{center:{lat:parseFloat(n.eq(0).data("latitude")),lng:parseFloat(n.eq(0).data("longitude"))},fullscreenControl:!1,mapTypeControl:!1,rotateControl:!1,scaleControl:!0,scrollwheel:!1,streetViewControl:!1,styles:[{featureType:"administrative",elementType:"all",stylers:[{saturation:"-100"}]},{featureType:"administrative.province",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",elementType:"all",stylers:[{saturation:-100},{lightness:"50"},{visibility:"simplified"}]},{featureType:"road",elementType:"all",stylers:[{saturation:"-100"},{visibility:"off"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"all",stylers:[{lightness:"30"}]},{featureType:"road.local",elementType:"all",stylers:[{lightness:"40"}]},{featureType:"transit",elementType:"all",stylers:[{saturation:-100},{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{lightness:"100"}]},{featureType:"water",elementType:"geometry",stylers:[{hue:"#ffff00"},{lightness:-25},{saturation:-97}]},{featureType:"water",elementType:"labels",stylers:[{lightness:-25},{saturation:-100}]}],zoom:3,zoomControl:!0}),i=0;i<n.length;i++)!function(e){var t=new google.maps.Marker({icon:0===e?{anchor:new google.maps.Point(31,31),origin:new google.maps.Point(0,0),scaledSize:new google.maps.Size(34,49),size:new google.maps.Size(34,49),url:"https://s3.amazonaws.com/natural-retreats/real-estate/google-maps-marker-active.png"}:{anchor:new google.maps.Point(14,14),origin:new google.maps.Point(0,0),scaledSize:new google.maps.Size(18,26),size:new google.maps.Size(18,26),url:"https://s3.amazonaws.com/natural-retreats/real-estate/google-maps-marker.png"},position:{lat:parseFloat(n.eq(e).data("latitude")),lng:parseFloat(n.eq(e).data("longitude"))},map:o});t.addListener("click",function(){o.setZoom(3),o.setCenter(t.getPosition()),nret.realEstateOurDifferences.setLocationsMapLocation(e)}),nret.realEstateOurDifferences.markers.push(t)}(i)},init:function(){nret.realEstateOurDifferences.ourLocationsMap()}}}(jQuery);var nret=nret||{};!function(e){nret.realEstateProperty={propertyFeaturesMobileDrawers:function(){e(".real-estate-property-features .feature button").on("click",function(){e(this).closest(".feature").siblings().removeClass("open"),e(this).closest(".feature").toggleClass("open")})},propertyMap:function(){var t=e("#property-map");if(t.length){var n=new google.maps.Map(t[0],{center:{lat:parseFloat(t.data("lat")),lng:parseFloat(t.data("lng"))},fullscreenControl:!1,mapTypeControl:!1,rotateControl:!1,scaleControl:!0,scrollwheel:!1,streetViewControl:!1,styles:[{featureType:"administrative",elementType:"all",stylers:[{saturation:"-100"}]},{featureType:"administrative.province",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",elementType:"all",stylers:[{saturation:-100},{lightness:"50"},{visibility:"simplified"}]},{featureType:"road",elementType:"all",stylers:[{saturation:"-100"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"all",stylers:[{lightness:"30"}]},{featureType:"road.local",elementType:"all",stylers:[{lightness:"40"}]},{featureType:"transit",elementType:"all",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"water",elementType:"geometry",stylers:[{hue:"#ffff00"},{lightness:-25},{saturation:-97}]},{featureType:"water",elementType:"labels",stylers:[{lightness:-25},{saturation:-100}]}],zoom:3,zoom:8,zoomControl:!0});new google.maps.Marker({icon:{anchor:new google.maps.Point(14,14),origin:new google.maps.Point(0,0),scaledSize:new google.maps.Size(18,26),size:new google.maps.Size(18,26),url:"https://s3.amazonaws.com/natural-retreats/real-estate/google-maps-marker.png"},position:{lat:parseFloat(t.data("lat")),lng:parseFloat(t.data("lng"))},map:n})}},init:function(){nret.realEstateProperty.propertyFeaturesMobileDrawers(),nret.realEstateProperty.propertyMap()}}}(jQuery);var nret=nret||{};!function(e){nret.realEstateServices={init:function(){}}}(jQuery);var nret=nret||{};!function(e){nret.retreatDetail={scrollToReview:function(){"#reviews"==window.location.hash&&e(".product__reviews").velocity("scroll",{duration:600,offset:-180,easing:"ease-in-out"})},init:function(){nret.retreatDetail.scrollToReview()}}}(jQuery);var nret=nret||{};!function(e){nret.page_retreatSearch={openDestinationList:function(){var t=e(".global-nav__destinations__destination-list-wrapper");e("#destination-label").on("click",function(){e(".growMeMore, .growMe").not(t).removeClass("show"),t.toggleClass("show")})},viewMore:function(){e(".retreat-view-more").on("click",function(t){t.preventDefault();for(var n=e(".retreats-search-results .retreat-listing__block-small.hide"),o=0;o<30;o++)e(n[o]).length>0?e(n[o]).removeClass("hide").addClass("show"):e(".retreat-view-more").fadeOut()})},initResults:function(){for(var t=e(".retreats-search-results .retreat-listing__block-small"),n=0;n<30;n++)e(t[n])&&e(t[n]).removeClass("hide").addClass("show");t.length<20&&e(".too-many-results").hide(),t.length<=30&&e(".retreat-view-more").hide()},init:function(){nret.page_retreatSearch.openDestinationList(),nret.page_retreatSearch.initResults(),nret.page_retreatSearch.viewMore()}}}(jQuery);